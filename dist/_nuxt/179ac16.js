(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{543:function(t,e,n){var content=n(628);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(35).default)("4f1b28f0",content,!0,{sourceMap:!1})},627:function(t,e,n){"use strict";var o=n(543);n.n(o).a},628:function(t,e,n){(e=n(34)(!1)).push([t.i,".container[data-v-50d71cda]{background:#f5f5f5;padding:30px 0}.container .main[data-v-50d71cda]{width:1000px;margin:0 auto}.container .main .pay-title[data-v-50d71cda]{text-align:right}.container .main .pay-title span[data-v-50d71cda]{font-size:28px;color:#ff4500}.container .main .pay-main[data-v-50d71cda]{background:#fff;margin-top:10px;border-top:5px solid orange;padding:30px}.container .main .pay-main h4[data-v-50d71cda]{font-size:28px;font-weight:400;margin-bottom:10px}.container .main .pay-main .pay-qrcode[data-v-50d71cda]{padding:0 80px}.container .main .pay-main .qrcode[data-v-50d71cda]{border:1px solid #ddd;padding:15px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.container .main .pay-main .qrcode #qrcode-stage[data-v-50d71cda]{width:200px;height:200px;margin-bottom:10px}.container .main .pay-main .qrcode p[data-v-50d71cda]{line-height:2;text-align:center}",""]),t.exports=e},693:function(t,e,n){"use strict";n.r(e);n(80);var o=n(606),r=n.n(o),d={data:function(){return{timerId:null,payData:{price:"***"}}},destroyed:function(){console.log("清理定时器"),clearTimeout(this.timerId)},watch:{"$store.state.user.userInfo.token":{handler:function(){var t=this;this.$store.state.user.userInfo.token&&this.$axios({url:"/airorders/"+this.$route.query.id,headers:{Authorization:"Bearer "+this.$store.state.user.userInfo.token}}).then((function(e){console.log(e.data),t.payData=e.data,r.a.toCanvas(t.$refs.qrcodeDom,e.data.payInfo.code_url,{width:200,color:{dark:"#000088"}}),t.checkPayState()}))},immediate:!0}},methods:{checkPayState:function(){var t=this;this.$axios({method:"post",url:"/airorders/checkpay",headers:{Authorization:"Bearer "+this.$store.state.user.userInfo.token},data:{id:this.payData.id,nonce_str:this.payData.price,out_trade_no:this.payData.payInfo.order_no}}).then((function(e){console.log(e.data),t.showPayState(e.data.trade_state),"SUCCESS"==e.data.trade_state?t.$message.success("感谢巨款 0.01 元"):t.timerId=setTimeout((function(){t.checkPayState()}),3e3)}))},showPayState:function(t){console.log("这里是处理各种状态的方法"),console.log({SUCCESS:"支付成功",REFUND:"转入退款",NOTPAY:"未支付",CLOSED:"已关闭",REVOKED:"已撤销",USERPAYING:"用户支付中",PAYERROR:"支付失败"}[t])}}},c=(n(627),n(19)),component=Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"main"},[n("div",{staticClass:"pay-title"},[t._v("\n            支付总金额 "),n("span",{staticClass:"pay-price"},[t._v("￥ "+t._s(t.payData.price))])]),t._v(" "),n("div",{staticClass:"pay-main"},[n("h4",[t._v("微信支付")]),t._v(" "),n("el-row",{staticClass:"pay-qrcode",attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("div",{staticClass:"qrcode"},[n("canvas",{ref:"qrcodeDom"}),t._v(" "),n("p",[t._v("请使用微信扫一扫")]),t._v(" "),n("p",[t._v("扫描二维码支付")])]),t._v(" "),n("div",{staticClass:"pay-example"},[n("img",{attrs:{src:"http://157.122.54.189:9093/images/wx-sweep2.jpg",alt:""}})])])],1)])])}),[],!1,null,"50d71cda",null);e.default=component.exports}}]);