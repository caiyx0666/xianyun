{"version":3,"file":"pages/post/article.js","sources":["webpack:///./components/user/LoginForm.vue?bf72","webpack:///./components/user/LoginForm.vue?2904","webpack:///./components/user/RegisterForm.vue?e73a","webpack:///./components/user/RegisterForm.vue?5471","webpack:///./components/user/LoginForm.vue?17d6","webpack:///./components/user/LoginForm.vue","webpack:///./components/user/LoginForm.vue?a332","webpack:///./components/user/LoginForm.vue?ac06","webpack:///./components/user/RegisterForm.vue?15e9","webpack:///./components/user/RegisterForm.vue","webpack:///./components/user/RegisterForm.vue?d5cf","webpack:///./components/user/RegisterForm.vue?5c6d","webpack:///./pages/post/article.vue?666f","webpack:///./pages/post/article.vue?ffab","webpack:///./pages/post/article.vue?29a1","webpack:///./pages/post/article.vue?d333","webpack:///./pages/post/article.vue","webpack:///./pages/post/article.vue?3d3a","webpack:///./pages/post/article.vue?14b2","webpack:///./components/user/LoginForm.vue?2c4f","webpack:///./components/user/RegisterForm.vue?33fa"],"sourcesContent":["import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=style&index=0&id=494839ac&scoped=true&lang=less&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=style&index=0&id=494839ac&scoped=true&lang=less&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".form[data-v-494839ac]{padding:25px}.form-item[data-v-494839ac]{margin-bottom:20px}.form-text[data-v-494839ac]{font-size:12px;color:#409eff;text-align:right;line-height:1}.submit[data-v-494839ac]{width:100%;margin-top:10px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=style&index=0&id=435c5fab&scoped=true&lang=less&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=style&index=0&id=435c5fab&scoped=true&lang=less&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".form[data-v-435c5fab]{padding:25px}.form-item[data-v-435c5fab]{margin-bottom:20px}.form-text[data-v-435c5fab]{font-size:12px;color:#409eff;text-align:right;line-height:1}.submit[data-v-435c5fab]{width:100%;margin-top:10px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"用户名/手机\"},on:{\"focus\":function($event){return _vm.hideErrMsg('username')}},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"placeholder\":\"密码\",\"type\":\"password\"},on:{\"focus\":function($event){return _vm.hideErrMsg('password')}},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_vm._v(\" \"),_c('p',{staticClass:\"form-text\"},[_c('nuxt-link',{attrs:{\"to\":\"#\"}},[_vm._v(\"忘记密码\")])],1),_vm._v(\" \"),_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleLoginSubmit}},[_vm._v(\"\\n    登录\\n  \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 表单数据\r\n      form: {\r\n        username: \"13800138000\",\r\n        password: \"123456\",\r\n      },\r\n      // 表单规则\r\n      rules: {\r\n        // 这里是一个对象\r\n        // 以 key: value 的形式指定每个字段应该符合的规则\r\n        username: [\r\n          // 这里是规则数组, 里面每个元素都是一条需要校验的 rule\r\n          {\r\n            required: true,\r\n            message: \"请输入用户名\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            pattern: /^1[3456789]\\d{9}$/,\r\n            message: \"请输入11位合法手机号\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: \"请输入密码\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            min: 6,\r\n            message: \"密码必须6位以上\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 提交登录\r\n    handleLoginSubmit() {\r\n      // 发送登录之前, 校验整个表单\r\n      // 可以使用 form.validate() 函数\r\n      // 这个函数有两种使用方式\r\n      // 1. 回调形式\r\n      // this.$refs.form.validate((isValid, invalidObj)=>{\r\n      //     // 校验完毕会得到两个参数, 是否成功的布尔值, 不合法的字段集合\r\n      //     console.log(isValid);\r\n      //     console.log(invalidObj);\r\n      //     // 只要在这里查判断校验成功, 然后发送请求即可\r\n      //     if (isValid) {\r\n      //         // 发送登录请求\r\n      //     }\r\n      // })\r\n\r\n      // 2. promise 的形式\r\n      this.$refs.form\r\n        .validate()\r\n        .then((res) => {\r\n          console.log(res);\r\n          console.log(\"校验成功\");\r\n          if (res) {\r\n            // 发送请求\r\n            // this.$axios({\r\n            //     method: 'post',\r\n            //     url: '/accounts/login',\r\n            //     data: this.form\r\n            // }).then(res=>{\r\n            //     console.log(res.data);\r\n            //     this.$message.success('登录成功')\r\n            //     // 将获取的数据存放到 vuex 当中\r\n            //     // 利用 commit 调用 mutation\r\n            //     this.$store.commit('user/setUserInfo', res.data)\r\n            // })\r\n            // 弹窗删掉, 留给拦截器处理\r\n            // this.$store.commit('user/setUserInfo', this.form)\r\n            // 登录表单这里想要登录, 但是我自己不做登录请求\r\n            // 将这个请求封装到 vuex 里面, 让所有其他组件都能共用\r\n            // this.$store.dispatch() 两个参数, action 的地址, 第二是数据\r\n            this.$store.dispatch(\"user/login\", this.form).then((res) => {\r\n              this.$message.success(\"登录成功\");\r\n              this.$router.back();\r\n              this.$emit(\"logins\");\r\n              console.log(res);\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          console.log(\"校验失败\");\r\n        });\r\n\r\n      // 暂时不管登录的事情,只是打印出数据作为参考\r\n      console.log(this.form);\r\n    },\r\n    hideErrMsg(propName) {\r\n      // 拿到当前表单\r\n      // 调用清理错误信息的函数\r\n      // 传入需要清理的 prop\r\n      this.$refs.form.clearValidate(propName);\r\n    },\r\n  },\r\n};\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginForm.vue?vue&type=template&id=494839ac&scoped=true&\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./LoginForm.vue?vue&type=style&index=0&id=494839ac&scoped=true&lang=less&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"494839ac\",\n  \"08163f90\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"用户名手机\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"captcha\"}},[_c('el-input',{attrs:{\"placeholder\":\"验证码\"},model:{value:(_vm.form.captcha),callback:function ($$v) {_vm.$set(_vm.form, \"captcha\", $$v)},expression:\"form.captcha\"}},[_c('template',{slot:\"append\"},[_c('el-button',{on:{\"click\":_vm.handleSendCaptcha}},[_vm._v(\"\\n                    发送验证码\\n                \")])],1)],2)],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"nickname\"}},[_c('el-input',{attrs:{\"placeholder\":\"你的名字\"},model:{value:(_vm.form.nickname),callback:function ($$v) {_vm.$set(_vm.form, \"nickname\", $$v)},expression:\"form.nickname\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"placeholder\":\"密码\",\"type\":\"password\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"form-item\",attrs:{\"prop\":\"checkPassword\"}},[_c('el-input',{attrs:{\"placeholder\":\"确认密码\",\"type\":\"password\"},model:{value:(_vm.form.checkPassword),callback:function ($$v) {_vm.$set(_vm.form, \"checkPassword\", $$v)},expression:\"form.checkPassword\"}})],1),_vm._v(\" \"),_c('el-button',{staticClass:\"submit\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleRegSubmit}},[_vm._v(\"\\n        注册\\n    \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    data() {\n        // 因为校验函数只有在 data 这里面需要用到, \n        // 无需放入 methods 在这里直接声明即可\n        const validatePass = (rule, value, callback) => {\n            // rule 是当前规则对象\n            // value 是当前输入框的值\n            // callback 是一个放行的函数\n            // 如果需要报错, 则创建一个错误对象\n            // new Error(错误信息字符串)\n            // 将这个错误对象传入 callback 放行函数当中\n            // 饿了么就会自动报错\n\n            if (value == '') {\n                // 输出错误提示\n                callback(new Error('请再次输入密码'))\n            }else if(value != this.form.password) {\n                // 输出错误提示\n                callback(new Error('两次密码必须一致'))\n            }else {\n                // 输出成功回调\n                callback();\n            }\n        }\n\n        return {\n            form: {\n                username: \"\",\n                nickname: \"\",\n                captcha: \"\",\n                password: \"\",\n                checkPassword: \"\",\n            },\n            rules: {\n                username: [\n                    {\n                        required: true,\n                        message: \"该项不能为空\",\n                        trigger: \"blur\",\n                    },\n                    {\n                        min: 5,\n                        max: 11,\n                        message: \"请输入合法手机号\",\n                        trigger: \"blur\",\n                    },\n                ],\n                nickname: [\n                    {\n                        required: true,\n                        message: \"该项不能为空\",\n                        trigger: \"blur\",\n                    },\n                ],\n                captcha: [\n                    {\n                        required: true,\n                        message: \"该项不能为空\",\n                        trigger: \"blur\",\n                    }\n                ],\n                password: [\n                    {\n                        required: true,\n                        message: \"该项不能为空\",\n                        trigger: \"blur\",\n                    },\n                ],\n                checkPassword: [\n                    {\n                        //   验证规则里面, 有三个需要处理的变量\n                        //   1. 要求\n                        //   2. 提示语\n                        //   3. 触发\n                        // 最灵活的是一个函数校验形式, 只剩下触发条件需要声明\n                        // 其余全部放到函数 validator 里面\n                        //   required: true,\n                        //   message: '该项不能为空',\n                        validator: validatePass,\n                        trigger: \"blur\",\n                    },\n                ],\n            },\n        };\n    },\n    methods: {\n        handleRegSubmit() {\n            // 注册暂时啥都不干\n            // 只是先将 form 数据打印出来\n            console.log(this.form);\n\n            // 输入完全部数据, 需要做一次校验\n            // 发送请求即可(跟登录没什么差别)\n            this.$refs.form.validate().then(res=>{\n                console.log('校验成功');\n                // 所有数据都符合要求后, 发送请求\n\n                // 先用剩余参数语法将 checkPassword 排除掉\n                const {checkPassword, ...data} = this.form\n\n                this.$axios({\n                    method: 'post',\n                    url: '/accounts/register',\n                    data\n                }).then(res=>{\n                    console.log(res.data);\n                    // 注册成功\n                    this.$message.success('注册成功')\n\n                    // 自动登录, 将数据存放到 vuex 里面\n                    this.$store.commit('user/setUserInfo', res.data)\n                }).catch(err=>{\n                    console.dir(err)\n                })\n            }).catch(err=>{\n                console.log('校验失败');\n            })\n        },\n        handleSendCaptcha() {\n            this.$axios({\n                method: 'post',\n                url: '/captchas',\n                data: {\n                    tel: this.form.username\n                }\n            }).then(res=>{\n                console.log(res.data);\n                if (res.data.code) {\n                    this.$message.success('验证码发送成功: '+ res.data.code)\n                }\n            })\n        },\n    },\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RegisterForm.vue?vue&type=template&id=435c5fab&scoped=true&\"\nimport script from \"./RegisterForm.vue?vue&type=script&lang=js&\"\nexport * from \"./RegisterForm.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./RegisterForm.vue?vue&type=style&index=0&id=435c5fab&scoped=true&lang=less&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"435c5fab\",\n  \"67349cd8\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./article.vue?vue&type=style&index=0&id=3b06a5b7&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"620226dd\", content, true, context)\n};","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./article.vue?vue&type=style&index=0&id=3b06a5b7&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./article.vue?vue&type=style&index=0&id=3b06a5b7&lang=less&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".content[data-v-3b06a5b7]{display:flex;justify-content:center}.content .right[data-v-3b06a5b7]{width:750px;height:790px;margin-top:20px}.content .right h2[data-v-3b06a5b7]{font-weight:400;padding:10px 0}.content .right p[data-v-3b06a5b7]{font-size:12px;color:#999;margin-bottom:10px}.content .right .wenbenkuang[data-v-3b06a5b7]{height:500px;margin:20px 0}.content .right .wenbenkuang .quillWrapper[data-v-3b06a5b7]{height:400px}.content .right .issued[data-v-3b06a5b7]{font-size:14px}.content .right a[data-v-3b06a5b7]{color:orange}.content .right a[data-v-3b06a5b7] :hover{text-decoration:underline}.content .left[data-v-3b06a5b7]{width:225px;height:600px;border:1px solid #ddd;margin-top:20px;margin-left:25px;padding:10px}.content .left .photo_kong[data-v-3b06a5b7]{width:100%;height:250px;line-height:250px;text-align:center;font-size:40px;font-weight:700}.content .left .photo_kong span[data-v-3b06a5b7]{display:block;font-size:25px;font-weight:400;color:#ccc;margin-top:-60px}.content .left .photo_kong span[data-v-3b06a5b7]:first-child{font-size:40px;font-weight:400;color:#ccc}.content .left .photo_kong span[data-v-3b06a5b7]:nth-child(2){font-weight:400;color:#ccc;margin-top:-180px}.content .left .icon-kongzhuangtai1[data-v-3b06a5b7]:before{color:#ccc}.content .left li[data-v-3b06a5b7]{margin:10px 0;background-color:#faf7f7}.content .left .time[data-v-3b06a5b7]{display:flex;justify-content:space-between}.content .left h4[data-v-3b06a5b7]:hover,.content .left span[data-v-3b06a5b7]:hover{cursor:pointer}.content .container[data-v-3b06a5b7]{position:fixed;top:50%;margin-top:-100px;z-index:201}.content .container .main[data-v-3b06a5b7]{width:1000px;height:100%;margin:0 auto;position:relative}.content .container .main .form-wrapper[data-v-3b06a5b7]{width:400px;margin:0 auto;background:#fff;box-shadow:2px 2px 0 rgba(0,0,0,.1);overflow:hidden}.content .container .main .form-wrapper .tabs span[data-v-3b06a5b7]{display:block;width:50%;height:50px;box-sizing:border-box;border-top:2px solid #eee;background:#eee;line-height:48px;text-align:center;cursor:pointer;color:#666}.content .container .main .form-wrapper .tabs span.active[data-v-3b06a5b7]{color:orange;border-top-color:orange;background:#fff;font-weight:700}.content .isShow[data-v-3b06a5b7]{height:96%;width:225px;overflow:auto;background:#eee}.content .cover[data-v-3b06a5b7]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:200}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_vm._ssrNode(\"<div id=\\\"cover1\\\" data-v-3b06a5b7></div> \"),_vm._ssrNode(\"<div class=\\\"right\\\" data-v-3b06a5b7>\",\"</div>\",[_vm._ssrNode(\"<h2 data-v-3b06a5b7>发表新攻略</h2> <p data-v-3b06a5b7>分享你的个人游记，让更多人看到哦！</p> \"),_c('el-input',{attrs:{\"placeholder\":\"请输入标题\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}}),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"wenbenkuang\\\" data-v-3b06a5b7>\",\"</div>\",[_c('client-only',[_c('VueEditor',{attrs:{\"useCustomImageHandler\":true},on:{\"image-added\":_vm.imgUpload},model:{value:(_vm.form.content),callback:function ($$v) {_vm.$set(_vm.form, \"content\", $$v)},expression:\"form.content\"}})],1)],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"city\\\" data-v-3b06a5b7>\",\"</div>\",[_c('el-form',{ref:\"form\",staticClass:\"search-form-content\",attrs:{\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"选择城市\"}},[_c('el-autocomplete',{staticClass:\"el-autocomplete\",attrs:{\"trigger-on-focus\":false,\"highlight-first-item\":true,\"fetch-suggestions\":_vm.queryDepartSearch,\"placeholder\":\"请搜索出发城市\"},on:{\"select\":_vm.handleDepartSelect},model:{value:(_vm.form.choiceCity),callback:function ($$v) {_vm.$set(_vm.form, \"choiceCity\", $$v)},expression:\"form.choiceCity\"}})],1)],1)],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"issued\\\" data-v-3b06a5b7>\",\"</div>\",[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.Issued}},[_vm._v(\"发布\")]),_vm._ssrNode(\"\\n            或者\\n            <a href=\\\"javascript:;\\\" data-v-3b06a5b7>保存到草稿</a>\")],2)],2),_vm._ssrNode(\" <div class=\\\"left\\\" data-v-3b06a5b7><h3 data-v-3b06a5b7>\"+_vm._ssrEscape(\"草稿箱（\"+_vm._s(_vm.$store.state.draft.draftArticle.length)+\"）\")+\"</h3> \"+((_vm.$store.state.draft.draftArticle.length == 0)?(\"<div class=\\\"photo_kong\\\" data-v-3b06a5b7><span class=\\\"iconfont icon-kongzhuangtai1\\\" data-v-3b06a5b7></span> <span data-v-3b06a5b7>空空如也!</span></div>\"):\"<!---->\")+\" <ul\"+(_vm._ssrClass(null,{\n                isShow:\n                    _vm.$store.state.draft.draftArticle.length > 9\n                        ? true\n                        : false,\n            }))+\" data-v-3b06a5b7>\"+(_vm._ssrList((_vm.$store.state.draft.draftArticle),function(item,index){return (\"<li data-v-3b06a5b7><h4 data-v-3b06a5b7>\"+_vm._ssrEscape(_vm._s(item.title))+\"</h4> <div class=\\\"time\\\" data-v-3b06a5b7><p data-v-3b06a5b7>\"+_vm._ssrEscape(_vm._s(_vm.saveData))+\"</p> <div data-v-3b06a5b7><span class=\\\"el-icon-edit\\\" data-v-3b06a5b7></span> <span class=\\\"el-icon-delete\\\" data-v-3b06a5b7></span></div></div></li>\")}))+\"</ul></div> \"),(_vm.login)?_vm._ssrNode(\"<div class=\\\"container\\\" data-v-3b06a5b7>\",\"</div>\",[_c('el-row',{staticClass:\"main\",attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\"}},[_c('div',{staticClass:\"form-wrapper\"},[_c('el-row',{staticClass:\"tabs\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},_vm._l(([\"登录\", \"注册\"]),function(item,index){return _c('span',{key:index,class:{ active: _vm.currentTab === index },on:{\"click\":function($event){return _vm.handleChangeTab(index)}}},[_vm._v(\"\\n                        \"+_vm._s(item)+\"\\n                    \")])}),0),_vm._v(\" \"),(_vm.currentTab == 0)?_c('LoginForm',{on:{\"logins\":_vm.Issued}}):_vm._e(),_vm._v(\" \"),(_vm.currentTab == 1)?_c('RegisterForm'):_vm._e()],1)])],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            // 时间\r\n            saveData: \"\",\r\n            // 城市名字\r\n            choiceCode: \"\",\r\n            currentTab: 0,\r\n            login: false,\r\n            form: {\r\n                title: \"\",\r\n                content: \"\",\r\n                choiceCity: \"\",\r\n            },\r\n        };\r\n    },\r\n    created() {\r\n        this.nowSaveDate();\r\n    },\r\n    methods: {\r\n        // 封装一个保存草稿时间\r\n        nowSaveDate() {\r\n            var aData = new Date();\r\n            console.log(aData); //Sun Oct 25 2020 09:41:29 GMT+0800 (中国标准时间)\r\n            this.saveData =\r\n                aData.getFullYear() +\r\n                \"-\" +\r\n                (aData.getMonth() + 1) +\r\n                \"-\" +\r\n                aData.getDate();\r\n            // console.log(this.saveData); //2020-10-25\r\n        },\r\n        //保存\r\n        save() {\r\n            if (this.form.title.trim() == \"\") {\r\n                this.$message.closeAll();\r\n                return this.$message.warning(\"标题不能为空\");\r\n            }\r\n            this.$store.commit(\"draft/addArticle\", { ...this.form });\r\n            this.$message.success(\"保存草稿成功\");\r\n            this.form.title = \"\";\r\n            this.form.content = \"\";\r\n            this.form.choiceCity = \"\";\r\n        },\r\n        // 删除\r\n        deletes(index) {\r\n            this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\r\n                confirmButtonText: \"确定\",\r\n                cancelButtonText: \"取消\",\r\n                type: \"warning\",\r\n            })\r\n                .then(() => {\r\n                    this.$message({\r\n                        type: \"success\",\r\n                        message: \"删除成功!\",\r\n                    });\r\n                    this.$store.commit(\"draft/removeArticle\", index);\r\n                })\r\n                .catch(() => {\r\n                    this.$message({\r\n                        type: \"info\",\r\n                        message: \"已取消删除\",\r\n                    });\r\n                });\r\n        },\r\n        // 编辑\r\n        compile(item) {\r\n            // console.log(\"数据呢\", item);\r\n            this.form = {\r\n                ...item,\r\n            };\r\n            this.$message.closeAll();\r\n            this.$message.success(\"编辑!\");\r\n        },\r\n        handleChangeTab(index) {\r\n            this.currentTab = index;\r\n        },\r\n        // 选择城市\r\n        loadCityList(queryString, showList) {\r\n            if (!queryString) {\r\n                showList([\r\n                    {\r\n                        value: \"请输入关键字\",\r\n                    },\r\n                ]);\r\n                return;\r\n            }\r\n\r\n            // 远程服务器获取城市列表\r\n            this.$axios({\r\n                url: \"/airs/city\",\r\n                params: {\r\n                    name: queryString,\r\n                },\r\n            }).then((res) => {\r\n                console.log(res);\r\n                const data = res.data.data.map((city) => {\r\n                    // 之前这里是直接获取数据, value 是以 name 作为基础\r\n                    return {\r\n                        ...city,\r\n                        value: city.name,\r\n                    };\r\n                });\r\n                showList(data);\r\n            });\r\n        },\r\n        // 显示搜索建议\r\n        queryDepartSearch(queryString, showList) {\r\n            this.loadCityList(queryString, showList);\r\n        },\r\n        // 搜索建议选择回调函数\r\n        handleDepartSelect(item) {\r\n            // 选中时可以拿到选中的那个数据对象\r\n            this.choiceCode = item;\r\n            // console.log(item);\r\n        },\r\n\r\n        // 富文本(图片处理)\r\n        imgUpload(file, Editor, cursorLocation, resetUploader) {\r\n            // console.log(\"图片处理\");\r\n            // console.log(file);\r\n            let data = new FormData();\r\n            data.append(\"files\", file);\r\n            this.$axios({\r\n                url: \"/upload\",\r\n                method: \"post\",\r\n                data,\r\n            }).then((res) => {\r\n                console.log(res.data);\r\n                const url = this.$axios.defaults.baseURL + res.data[0].url;\r\n                Editor.insertEmbed(cursorLocation, \"image\", url);\r\n                resetUploader();\r\n            });\r\n        },\r\n\r\n        // 发布 文章\r\n        Issued() {\r\n            if (this.form.title.trim() == \"\") {\r\n                this.$message.closeAll();\r\n                return this.$message.warning(\"标题不能为空\");\r\n            }\r\n            if (this.form.content.trim() == \"\") {\r\n                this.$message.closeAll();\r\n                return this.$message.warning(\"内容不能为空\");\r\n            }\r\n            if (this.form.choiceCity.trim() == \"\") {\r\n                this.$message.closeAll();\r\n                return this.$message.warning(\"城市不能为空\");\r\n            }\r\n            //判断 是否登录\r\n            if (this.$store.state.user.userInfo.token) {\r\n                this.login = false;\r\n                // console.log(this.form);\r\n                document.getElementById(\"cover1\").classList.remove(\"cover\");\r\n                this.$axios({\r\n                    method: \"post\",\r\n                    url: \"/posts\",\r\n                    headers: {\r\n                        Authorization:\r\n                            \"Bearer \" + this.$store.state.user.userInfo.token,\r\n                    },\r\n                    data: {\r\n                        content: this.form.content,\r\n                        title: this.form.title,\r\n                        city: this.form.choiceCity,\r\n                    },\r\n                }).then((res) => {\r\n                    console.log(res);\r\n                    if (res.data.message == \"新增成功\") {\r\n                        this.$message.success(res.data.message);\r\n                        this.form.title = \"\";\r\n                        this.form.content = \"\";\r\n                        this.form.choiceCity = \"\";\r\n                        this.$router.push(\"/post/\");\r\n                    }\r\n                });\r\n            } else {\r\n                this.$message.warning(\"未登录,请登录\");\r\n                document.getElementById(\"cover1\").classList.add(\"cover\");\r\n                this.login = true;\r\n            }\r\n        },\r\n    },\r\n};\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./article.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./article.vue?vue&type=template&id=3b06a5b7&scoped=true&\"\nimport script from \"./article.vue?vue&type=script&lang=js&\"\nexport * from \"./article.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./article.vue?vue&type=style&index=0&id=3b06a5b7&lang=less&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"3b06a5b7\",\n  \"1f9f5594\"\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {LoginForm: require('D:\\\\前端开发\\\\线下黑马学习\\\\07-Vue\\\\day21\\\\xingyue\\\\components\\\\user\\\\LoginForm.vue').default,RegisterForm: require('D:\\\\前端开发\\\\线下黑马学习\\\\07-Vue\\\\day21\\\\xingyue\\\\components\\\\user\\\\RegisterForm.vue').default})\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=style&index=0&id=494839ac&scoped=true&lang=less&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"0a2549cb\", content, true, context)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterForm.vue?vue&type=style&index=0&id=435c5fab&scoped=true&lang=less&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"0273269d\", content, true, context)\n};"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAtBA;AAPA;AAqCA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AA/DA;AAxCA;;AChCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AAJA;AAOA;AAEA;AACA;AACA;AAHA;AAMA;AAEA;AACA;AACA;AAHA;AAMA;AAEA;AACA;AACA;AAHA;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AApCA;AARA;AA2DA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAHA;AAOA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AA/CA;AArFA;;AC9CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAPA;AAaA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAOA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AACA;AACA;AAEA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AAHA;AAPA;AAaA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnKA;AAnBA;;ACpHA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}