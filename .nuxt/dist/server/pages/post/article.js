exports.ids = [8];
exports.modules = {

/***/ 101:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LoginForm_vue_vue_type_style_index_0_id_494839ac_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LoginForm_vue_vue_type_style_index_0_id_494839ac_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LoginForm_vue_vue_type_style_index_0_id_494839ac_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LoginForm_vue_vue_type_style_index_0_id_494839ac_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LoginForm_vue_vue_type_style_index_0_id_494839ac_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_LoginForm_vue_vue_type_style_index_0_id_494839ac_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 102:
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(4);
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".form[data-v-494839ac]{padding:25px}.form-item[data-v-494839ac]{margin-bottom:20px}.form-text[data-v-494839ac]{font-size:12px;color:#409eff;text-align:right;line-height:1}.submit[data-v-494839ac]{width:100%;margin-top:10px}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ 103:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_RegisterForm_vue_vue_type_style_index_0_id_435c5fab_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_RegisterForm_vue_vue_type_style_index_0_id_435c5fab_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_RegisterForm_vue_vue_type_style_index_0_id_435c5fab_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_RegisterForm_vue_vue_type_style_index_0_id_435c5fab_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_RegisterForm_vue_vue_type_style_index_0_id_435c5fab_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_RegisterForm_vue_vue_type_style_index_0_id_435c5fab_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 104:
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(4);
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".form[data-v-435c5fab]{padding:25px}.form-item[data-v-435c5fab]{margin-bottom:20px}.form-text[data-v-435c5fab]{font-size:12px;color:#409eff;text-align:right;line-height:1}.submit[data-v-435c5fab]{width:100%;margin-top:10px}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ 105:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/user/LoginForm.vue?vue&type=template&id=494839ac&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:"form",staticClass:"form",attrs:{"model":_vm.form,"rules":_vm.rules}},[_c('el-form-item',{staticClass:"form-item",attrs:{"prop":"username"}},[_c('el-input',{attrs:{"placeholder":"用户名/手机"},on:{"focus":function($event){return _vm.hideErrMsg('username')}},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, "username", $$v)},expression:"form.username"}})],1),_vm._v(" "),_c('el-form-item',{staticClass:"form-item",attrs:{"prop":"password"}},[_c('el-input',{attrs:{"placeholder":"密码","type":"password"},on:{"focus":function($event){return _vm.hideErrMsg('password')}},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, "password", $$v)},expression:"form.password"}})],1),_vm._v(" "),_c('p',{staticClass:"form-text"},[_c('nuxt-link',{attrs:{"to":"#"}},[_vm._v("忘记密码")])],1),_vm._v(" "),_c('el-button',{staticClass:"submit",attrs:{"type":"primary"},on:{"click":_vm.handleLoginSubmit}},[_vm._v("\n    登录\n  ")])],1)}
var staticRenderFns = []


// CONCATENATED MODULE: ./components/user/LoginForm.vue?vue&type=template&id=494839ac&scoped=true&

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/user/LoginForm.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
/* harmony default export */ var LoginFormvue_type_script_lang_js_ = ({
  data() {
    return {
      // 表单数据
      form: {
        username: "13800138000",
        password: "123456"
      },
      // 表单规则
      rules: {
        // 这里是一个对象
        // 以 key: value 的形式指定每个字段应该符合的规则
        username: [// 这里是规则数组, 里面每个元素都是一条需要校验的 rule
        {
          required: true,
          message: "请输入用户名",
          trigger: "blur"
        }, {
          pattern: /^1[3456789]\d{9}$/,
          message: "请输入11位合法手机号",
          trigger: "blur"
        }],
        password: [{
          required: true,
          message: "请输入密码",
          trigger: "blur"
        }, {
          min: 6,
          message: "密码必须6位以上",
          trigger: "blur"
        }]
      }
    };
  },

  methods: {
    // 提交登录
    handleLoginSubmit() {
      // 发送登录之前, 校验整个表单
      // 可以使用 form.validate() 函数
      // 这个函数有两种使用方式
      // 1. 回调形式
      // this.$refs.form.validate((isValid, invalidObj)=>{
      //     // 校验完毕会得到两个参数, 是否成功的布尔值, 不合法的字段集合
      //     console.log(isValid);
      //     console.log(invalidObj);
      //     // 只要在这里查判断校验成功, 然后发送请求即可
      //     if (isValid) {
      //         // 发送登录请求
      //     }
      // })
      // 2. promise 的形式
      this.$refs.form.validate().then(res => {
        console.log(res);
        console.log("校验成功");

        if (res) {
          // 发送请求
          // this.$axios({
          //     method: 'post',
          //     url: '/accounts/login',
          //     data: this.form
          // }).then(res=>{
          //     console.log(res.data);
          //     this.$message.success('登录成功')
          //     // 将获取的数据存放到 vuex 当中
          //     // 利用 commit 调用 mutation
          //     this.$store.commit('user/setUserInfo', res.data)
          // })
          // 弹窗删掉, 留给拦截器处理
          // this.$store.commit('user/setUserInfo', this.form)
          // 登录表单这里想要登录, 但是我自己不做登录请求
          // 将这个请求封装到 vuex 里面, 让所有其他组件都能共用
          // this.$store.dispatch() 两个参数, action 的地址, 第二是数据
          this.$store.dispatch("user/login", this.form).then(res => {
            this.$message.success("登录成功");
            this.$router.back();
            this.$emit("logins");
            console.log(res);
          });
        }
      }).catch(err => {
        console.log(err);
        console.log("校验失败");
      }); // 暂时不管登录的事情,只是打印出数据作为参考

      console.log(this.form);
    },

    hideErrMsg(propName) {
      // 拿到当前表单
      // 调用清理错误信息的函数
      // 传入需要清理的 prop
      this.$refs.form.clearValidate(propName);
    }

  }
});
// CONCATENATED MODULE: ./components/user/LoginForm.vue?vue&type=script&lang=js&
 /* harmony default export */ var user_LoginFormvue_type_script_lang_js_ = (LoginFormvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1);

// CONCATENATED MODULE: ./components/user/LoginForm.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__(101)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  user_LoginFormvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  "494839ac",
  "08163f90"
  
)

/* harmony default export */ var LoginForm = __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 106:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/user/RegisterForm.vue?vue&type=template&id=435c5fab&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:"form",staticClass:"form",attrs:{"model":_vm.form,"rules":_vm.rules}},[_c('el-form-item',{staticClass:"form-item",attrs:{"prop":"username"}},[_c('el-input',{attrs:{"placeholder":"用户名手机"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, "username", $$v)},expression:"form.username"}})],1),_vm._v(" "),_c('el-form-item',{staticClass:"form-item",attrs:{"prop":"captcha"}},[_c('el-input',{attrs:{"placeholder":"验证码"},model:{value:(_vm.form.captcha),callback:function ($$v) {_vm.$set(_vm.form, "captcha", $$v)},expression:"form.captcha"}},[_c('template',{slot:"append"},[_c('el-button',{on:{"click":_vm.handleSendCaptcha}},[_vm._v("\n                    发送验证码\n                ")])],1)],2)],1),_vm._v(" "),_c('el-form-item',{staticClass:"form-item",attrs:{"prop":"nickname"}},[_c('el-input',{attrs:{"placeholder":"你的名字"},model:{value:(_vm.form.nickname),callback:function ($$v) {_vm.$set(_vm.form, "nickname", $$v)},expression:"form.nickname"}})],1),_vm._v(" "),_c('el-form-item',{staticClass:"form-item",attrs:{"prop":"password"}},[_c('el-input',{attrs:{"placeholder":"密码","type":"password"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, "password", $$v)},expression:"form.password"}})],1),_vm._v(" "),_c('el-form-item',{staticClass:"form-item",attrs:{"prop":"checkPassword"}},[_c('el-input',{attrs:{"placeholder":"确认密码","type":"password"},model:{value:(_vm.form.checkPassword),callback:function ($$v) {_vm.$set(_vm.form, "checkPassword", $$v)},expression:"form.checkPassword"}})],1),_vm._v(" "),_c('el-button',{staticClass:"submit",attrs:{"type":"primary"},on:{"click":_vm.handleRegSubmit}},[_vm._v("\n        注册\n    ")])],1)}
var staticRenderFns = []


// CONCATENATED MODULE: ./components/user/RegisterForm.vue?vue&type=template&id=435c5fab&scoped=true&

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/user/RegisterForm.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
/* harmony default export */ var RegisterFormvue_type_script_lang_js_ = ({
  data() {
    // 因为校验函数只有在 data 这里面需要用到, 
    // 无需放入 methods 在这里直接声明即可
    const validatePass = (rule, value, callback) => {
      // rule 是当前规则对象
      // value 是当前输入框的值
      // callback 是一个放行的函数
      // 如果需要报错, 则创建一个错误对象
      // new Error(错误信息字符串)
      // 将这个错误对象传入 callback 放行函数当中
      // 饿了么就会自动报错
      if (value == '') {
        // 输出错误提示
        callback(new Error('请再次输入密码'));
      } else if (value != this.form.password) {
        // 输出错误提示
        callback(new Error('两次密码必须一致'));
      } else {
        // 输出成功回调
        callback();
      }
    };

    return {
      form: {
        username: "",
        nickname: "",
        captcha: "",
        password: "",
        checkPassword: ""
      },
      rules: {
        username: [{
          required: true,
          message: "该项不能为空",
          trigger: "blur"
        }, {
          min: 5,
          max: 11,
          message: "请输入合法手机号",
          trigger: "blur"
        }],
        nickname: [{
          required: true,
          message: "该项不能为空",
          trigger: "blur"
        }],
        captcha: [{
          required: true,
          message: "该项不能为空",
          trigger: "blur"
        }],
        password: [{
          required: true,
          message: "该项不能为空",
          trigger: "blur"
        }],
        checkPassword: [{
          //   验证规则里面, 有三个需要处理的变量
          //   1. 要求
          //   2. 提示语
          //   3. 触发
          // 最灵活的是一个函数校验形式, 只剩下触发条件需要声明
          // 其余全部放到函数 validator 里面
          //   required: true,
          //   message: '该项不能为空',
          validator: validatePass,
          trigger: "blur"
        }]
      }
    };
  },

  methods: {
    handleRegSubmit() {
      // 注册暂时啥都不干
      // 只是先将 form 数据打印出来
      console.log(this.form); // 输入完全部数据, 需要做一次校验
      // 发送请求即可(跟登录没什么差别)

      this.$refs.form.validate().then(res => {
        console.log('校验成功'); // 所有数据都符合要求后, 发送请求
        // 先用剩余参数语法将 checkPassword 排除掉

        const {
          checkPassword,
          ...data
        } = this.form;
        this.$axios({
          method: 'post',
          url: '/accounts/register',
          data
        }).then(res => {
          console.log(res.data); // 注册成功

          this.$message.success('注册成功'); // 自动登录, 将数据存放到 vuex 里面

          this.$store.commit('user/setUserInfo', res.data);
        }).catch(err => {
          console.dir(err);
        });
      }).catch(err => {
        console.log('校验失败');
      });
    },

    handleSendCaptcha() {
      this.$axios({
        method: 'post',
        url: '/captchas',
        data: {
          tel: this.form.username
        }
      }).then(res => {
        console.log(res.data);

        if (res.data.code) {
          this.$message.success('验证码发送成功: ' + res.data.code);
        }
      });
    }

  }
});
// CONCATENATED MODULE: ./components/user/RegisterForm.vue?vue&type=script&lang=js&
 /* harmony default export */ var user_RegisterFormvue_type_script_lang_js_ = (RegisterFormvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1);

// CONCATENATED MODULE: ./components/user/RegisterForm.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__(103)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  user_RegisterFormvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  "435c5fab",
  "67349cd8"
  
)

/* harmony default export */ var RegisterForm = __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 137:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(207);
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to SSR context
var add = __webpack_require__(5).default
module.exports.__inject__ = function (context) {
  add("620226dd", content, true, context)
};

/***/ }),

/***/ 206:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_article_vue_vue_type_style_index_0_id_3b06a5b7_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(137);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_article_vue_vue_type_style_index_0_id_3b06a5b7_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_article_vue_vue_type_style_index_0_id_3b06a5b7_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_article_vue_vue_type_style_index_0_id_3b06a5b7_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_article_vue_vue_type_style_index_0_id_3b06a5b7_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_article_vue_vue_type_style_index_0_id_3b06a5b7_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 207:
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(4);
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".content[data-v-3b06a5b7]{display:flex;justify-content:center}.content .right[data-v-3b06a5b7]{width:750px;height:790px;margin-top:20px}.content .right h2[data-v-3b06a5b7]{font-weight:400;padding:10px 0}.content .right p[data-v-3b06a5b7]{font-size:12px;color:#999;margin-bottom:10px}.content .right .wenbenkuang[data-v-3b06a5b7]{height:500px;margin:20px 0}.content .right .wenbenkuang .quillWrapper[data-v-3b06a5b7]{height:400px}.content .right .issued[data-v-3b06a5b7]{font-size:14px}.content .right a[data-v-3b06a5b7]{color:orange}.content .right a[data-v-3b06a5b7] :hover{text-decoration:underline}.content .left[data-v-3b06a5b7]{width:225px;height:600px;border:1px solid #ddd;margin-top:20px;margin-left:25px;padding:10px}.content .left .photo_kong[data-v-3b06a5b7]{width:100%;height:250px;line-height:250px;text-align:center;font-size:40px;font-weight:700}.content .left .photo_kong span[data-v-3b06a5b7]{display:block;font-size:25px;font-weight:400;color:#ccc;margin-top:-60px}.content .left .photo_kong span[data-v-3b06a5b7]:first-child{font-size:40px;font-weight:400;color:#ccc}.content .left .photo_kong span[data-v-3b06a5b7]:nth-child(2){font-weight:400;color:#ccc;margin-top:-180px}.content .left .icon-kongzhuangtai1[data-v-3b06a5b7]:before{color:#ccc}.content .left li[data-v-3b06a5b7]{margin:10px 0;background-color:#faf7f7}.content .left .time[data-v-3b06a5b7]{display:flex;justify-content:space-between}.content .left h4[data-v-3b06a5b7]:hover,.content .left span[data-v-3b06a5b7]:hover{cursor:pointer}.content .container[data-v-3b06a5b7]{position:fixed;top:50%;margin-top:-100px;z-index:201}.content .container .main[data-v-3b06a5b7]{width:1000px;height:100%;margin:0 auto;position:relative}.content .container .main .form-wrapper[data-v-3b06a5b7]{width:400px;margin:0 auto;background:#fff;box-shadow:2px 2px 0 rgba(0,0,0,.1);overflow:hidden}.content .container .main .form-wrapper .tabs span[data-v-3b06a5b7]{display:block;width:50%;height:50px;box-sizing:border-box;border-top:2px solid #eee;background:#eee;line-height:48px;text-align:center;cursor:pointer;color:#666}.content .container .main .form-wrapper .tabs span.active[data-v-3b06a5b7]{color:orange;border-top-color:orange;background:#fff;font-weight:700}.content .isShow[data-v-3b06a5b7]{height:96%;width:225px;overflow:auto;background:#eee}.content .cover[data-v-3b06a5b7]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:200}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ 251:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/post/article.vue?vue&type=template&id=3b06a5b7&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"content"},[_vm._ssrNode("<div id=\"cover1\" data-v-3b06a5b7></div> "),_vm._ssrNode("<div class=\"right\" data-v-3b06a5b7>","</div>",[_vm._ssrNode("<h2 data-v-3b06a5b7>发表新攻略</h2> <p data-v-3b06a5b7>分享你的个人游记，让更多人看到哦！</p> "),_c('el-input',{attrs:{"placeholder":"请输入标题"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, "title", $$v)},expression:"form.title"}}),_vm._ssrNode(" "),_vm._ssrNode("<div class=\"wenbenkuang\" data-v-3b06a5b7>","</div>",[_c('client-only',[_c('VueEditor',{attrs:{"useCustomImageHandler":true},on:{"image-added":_vm.imgUpload},model:{value:(_vm.form.content),callback:function ($$v) {_vm.$set(_vm.form, "content", $$v)},expression:"form.content"}})],1)],1),_vm._ssrNode(" "),_vm._ssrNode("<div class=\"city\" data-v-3b06a5b7>","</div>",[_c('el-form',{ref:"form",staticClass:"search-form-content",attrs:{"label-width":"80px"}},[_c('el-form-item',{attrs:{"label":"选择城市"}},[_c('el-autocomplete',{staticClass:"el-autocomplete",attrs:{"trigger-on-focus":false,"highlight-first-item":true,"fetch-suggestions":_vm.queryDepartSearch,"placeholder":"请搜索出发城市"},on:{"select":_vm.handleDepartSelect},model:{value:(_vm.form.choiceCity),callback:function ($$v) {_vm.$set(_vm.form, "choiceCity", $$v)},expression:"form.choiceCity"}})],1)],1)],1),_vm._ssrNode(" "),_vm._ssrNode("<div class=\"issued\" data-v-3b06a5b7>","</div>",[_c('el-button',{attrs:{"type":"primary"},on:{"click":_vm.Issued}},[_vm._v("发布")]),_vm._ssrNode("\n            或者\n            <a href=\"javascript:;\" data-v-3b06a5b7>保存到草稿</a>")],2)],2),_vm._ssrNode(" <div class=\"left\" data-v-3b06a5b7><h3 data-v-3b06a5b7>"+_vm._ssrEscape("草稿箱（"+_vm._s(_vm.$store.state.draft.draftArticle.length)+"）")+"</h3> "+((_vm.$store.state.draft.draftArticle.length == 0)?("<div class=\"photo_kong\" data-v-3b06a5b7><span class=\"iconfont icon-kongzhuangtai1\" data-v-3b06a5b7></span> <span data-v-3b06a5b7>空空如也!</span></div>"):"<!---->")+" <ul"+(_vm._ssrClass(null,{
                isShow:
                    _vm.$store.state.draft.draftArticle.length > 9
                        ? true
                        : false,
            }))+" data-v-3b06a5b7>"+(_vm._ssrList((_vm.$store.state.draft.draftArticle),function(item,index){return ("<li data-v-3b06a5b7><h4 data-v-3b06a5b7>"+_vm._ssrEscape(_vm._s(item.title))+"</h4> <div class=\"time\" data-v-3b06a5b7><p data-v-3b06a5b7>"+_vm._ssrEscape(_vm._s(_vm.saveData))+"</p> <div data-v-3b06a5b7><span class=\"el-icon-edit\" data-v-3b06a5b7></span> <span class=\"el-icon-delete\" data-v-3b06a5b7></span></div></div></li>")}))+"</ul></div> "),(_vm.login)?_vm._ssrNode("<div class=\"container\" data-v-3b06a5b7>","</div>",[_c('el-row',{staticClass:"main",attrs:{"type":"flex","justify":"center","align":"middle"}},[_c('div',{staticClass:"form-wrapper"},[_c('el-row',{staticClass:"tabs",attrs:{"type":"flex","justify":"center"}},_vm._l((["登录", "注册"]),function(item,index){return _c('span',{key:index,class:{ active: _vm.currentTab === index },on:{"click":function($event){return _vm.handleChangeTab(index)}}},[_vm._v("\n                        "+_vm._s(item)+"\n                    ")])}),0),_vm._v(" "),(_vm.currentTab == 0)?_c('LoginForm',{on:{"logins":_vm.Issued}}):_vm._e(),_vm._v(" "),(_vm.currentTab == 1)?_c('RegisterForm'):_vm._e()],1)])],1):_vm._e()],2)}
var staticRenderFns = []


// CONCATENATED MODULE: ./pages/post/article.vue?vue&type=template&id=3b06a5b7&scoped=true&

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/post/article.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
/* harmony default export */ var articlevue_type_script_lang_js_ = ({
  data() {
    return {
      // 时间
      saveData: "",
      // 城市名字
      choiceCode: "",
      currentTab: 0,
      login: false,
      form: {
        title: "",
        content: "",
        choiceCity: ""
      }
    };
  },

  created() {
    this.nowSaveDate();
  },

  methods: {
    // 封装一个保存草稿时间
    nowSaveDate() {
      var aData = new Date();
      console.log(aData); //Sun Oct 25 2020 09:41:29 GMT+0800 (中国标准时间)

      this.saveData = aData.getFullYear() + "-" + (aData.getMonth() + 1) + "-" + aData.getDate(); // console.log(this.saveData); //2020-10-25
    },

    //保存
    save() {
      if (this.form.title.trim() == "") {
        this.$message.closeAll();
        return this.$message.warning("标题不能为空");
      }

      this.$store.commit("draft/addArticle", { ...this.form
      });
      this.$message.success("保存草稿成功");
      this.form.title = "";
      this.form.content = "";
      this.form.choiceCity = "";
    },

    // 删除
    deletes(index) {
      this.$confirm("此操作将永久删除该文件, 是否继续?", "提示", {
        confirmButtonText: "确定",
        cancelButtonText: "取消",
        type: "warning"
      }).then(() => {
        this.$message({
          type: "success",
          message: "删除成功!"
        });
        this.$store.commit("draft/removeArticle", index);
      }).catch(() => {
        this.$message({
          type: "info",
          message: "已取消删除"
        });
      });
    },

    // 编辑
    compile(item) {
      // console.log("数据呢", item);
      this.form = { ...item
      };
      this.$message.closeAll();
      this.$message.success("编辑!");
    },

    handleChangeTab(index) {
      this.currentTab = index;
    },

    // 选择城市
    loadCityList(queryString, showList) {
      if (!queryString) {
        showList([{
          value: "请输入关键字"
        }]);
        return;
      } // 远程服务器获取城市列表


      this.$axios({
        url: "/airs/city",
        params: {
          name: queryString
        }
      }).then(res => {
        console.log(res);
        const data = res.data.data.map(city => {
          // 之前这里是直接获取数据, value 是以 name 作为基础
          return { ...city,
            value: city.name
          };
        });
        showList(data);
      });
    },

    // 显示搜索建议
    queryDepartSearch(queryString, showList) {
      this.loadCityList(queryString, showList);
    },

    // 搜索建议选择回调函数
    handleDepartSelect(item) {
      // 选中时可以拿到选中的那个数据对象
      this.choiceCode = item; // console.log(item);
    },

    // 富文本(图片处理)
    imgUpload(file, Editor, cursorLocation, resetUploader) {
      // console.log("图片处理");
      // console.log(file);
      let data = new FormData();
      data.append("files", file);
      this.$axios({
        url: "/upload",
        method: "post",
        data
      }).then(res => {
        console.log(res.data);
        const url = this.$axios.defaults.baseURL + res.data[0].url;
        Editor.insertEmbed(cursorLocation, "image", url);
        resetUploader();
      });
    },

    // 发布 文章
    Issued() {
      if (this.form.title.trim() == "") {
        this.$message.closeAll();
        return this.$message.warning("标题不能为空");
      }

      if (this.form.content.trim() == "") {
        this.$message.closeAll();
        return this.$message.warning("内容不能为空");
      }

      if (this.form.choiceCity.trim() == "") {
        this.$message.closeAll();
        return this.$message.warning("城市不能为空");
      } //判断 是否登录


      if (this.$store.state.user.userInfo.token) {
        this.login = false; // console.log(this.form);

        document.getElementById("cover1").classList.remove("cover");
        this.$axios({
          method: "post",
          url: "/posts",
          headers: {
            Authorization: "Bearer " + this.$store.state.user.userInfo.token
          },
          data: {
            content: this.form.content,
            title: this.form.title,
            city: this.form.choiceCity
          }
        }).then(res => {
          console.log(res);

          if (res.data.message == "新增成功") {
            this.$message.success(res.data.message);
            this.form.title = "";
            this.form.content = "";
            this.form.choiceCity = "";
            this.$router.push("/post/");
          }
        });
      } else {
        this.$message.warning("未登录,请登录");
        document.getElementById("cover1").classList.add("cover");
        this.login = true;
      }
    }

  }
});
// CONCATENATED MODULE: ./pages/post/article.vue?vue&type=script&lang=js&
 /* harmony default export */ var post_articlevue_type_script_lang_js_ = (articlevue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1);

// CONCATENATED MODULE: ./pages/post/article.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__(206)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  post_articlevue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  "3b06a5b7",
  "1f9f5594"
  
)

/* harmony default export */ var article = __webpack_exports__["default"] = (component.exports);

/* nuxt-component-imports */
installComponents(component, {LoginForm: __webpack_require__(105).default,RegisterForm: __webpack_require__(106).default})


/***/ }),

/***/ 98:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(102);
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to SSR context
var add = __webpack_require__(5).default
module.exports.__inject__ = function (context) {
  add("0a2549cb", content, true, context)
};

/***/ }),

/***/ 99:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(104);
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to SSR context
var add = __webpack_require__(5).default
module.exports.__inject__ = function (context) {
  add("0273269d", content, true, context)
};

/***/ })

};;
//# sourceMappingURL=article.js.map