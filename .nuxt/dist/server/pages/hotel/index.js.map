{"version":3,"file":"pages/hotel/index.js","sources":["webpack:///./pages/hotel/index.vue?34db","webpack:///./components/hotel/HotelQuery.vue?b6ce","webpack:///./components/hotel/HotelFilter.vue?5300","webpack:///./components/hotel/HotelList.vue?cd36","webpack:///./pages/hotel/index.vue?dbe6","webpack:///./pages/hotel/index.vue?fa59","webpack:///./components/hotel/HotelQuery.vue?3cff","webpack:///./components/hotel/HotelQuery.vue?e6bd","webpack:///./components/hotel/HotelFilter.vue?f520","webpack:///./components/hotel/HotelFilter.vue?7ebd","webpack:///./components/hotel/HotelList.vue?6e6e","webpack:///./components/hotel/HotelList.vue?fce8","webpack:///./components/hotel/HotelQuery.vue?d6f0","webpack:///./components/hotel/HotelQuery.vue","webpack:///./components/hotel/HotelQuery.vue?b794","webpack:///./components/hotel/HotelQuery.vue?d62f","webpack:///./components/hotel/HotelFilter.vue?4e58","webpack:///./components/hotel/HotelFilter.vue","webpack:///./components/hotel/HotelFilter.vue?1025","webpack:///./components/hotel/HotelFilter.vue?4791","webpack:///./components/hotel/HotelList.vue?f209","webpack:///./components/hotel/HotelList.vue","webpack:///./components/hotel/HotelList.vue?4998","webpack:///./components/hotel/HotelList.vue?f54e","webpack:///./pages/hotel/index.vue?0c3b","webpack:///./pages/hotel/index.vue","webpack:///./pages/hotel/index.vue?6122","webpack:///./pages/hotel/index.vue?8a64"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=68aa3b3e&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"f26f9fb0\", content, true, context)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelQuery.vue?vue&type=style&index=0&id=ccbf9382&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"49cf5ae1\", content, true, context)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelFilter.vue?vue&type=style&index=0&id=1b4322f9&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"25466492\", content, true, context)\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelList.vue?vue&type=style&index=0&id=ec10d0f0&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"1d049082\", content, true, context)\n};","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=68aa3b3e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=68aa3b3e&lang=less&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".container[data-v-68aa3b3e]{width:1000px;margin:0 auto}.container .breadcrumb[data-v-68aa3b3e]{padding:20px 0}.container .sights[data-v-68aa3b3e]{font-size:14px;margin-bottom:20px}.container .sights .cities[data-v-68aa3b3e]{max-height:200px;overflow-y:auto;position:relative}.container .sights .cities[data-v-68aa3b3e]::-webkit-scrollbar{position:absolute;width:10px;padding-right:-20px;right:-20px}.container .sights .cities[data-v-68aa3b3e]::-webkit-scrollbar-thumb{border-radius:10px;background:rgba(0,0,0,.2)}.container .sights .cities[data-v-68aa3b3e]::-webkit-scrollbar-track{border-radius:0;background:rgba(0,0,0,.1)}.container .sights .cities .citie[data-v-68aa3b3e]{margin:4px}.container .sights .price[data-v-68aa3b3e]{margin-top:20px}.container .sights .price .dishini[data-v-68aa3b3e]{margin-right:14px}.container .sights .price .dishini .icon-dishini-[data-v-68aa3b3e]{color:#f90}.filter-list[data-v-68aa3b3e]{margin-bottom:10px!important}.popbox[data-v-68aa3b3e]{font-size:12px}[data-v-68aa3b3e] .custom-content-marker{position:relative;width:25px;height:34px}[data-v-68aa3b3e] .custom-content-marker img{width:100%;height:100%}[data-v-68aa3b3e] .custom-content-marker .close-btn{position:absolute;top:4px;right:6px;width:15px;height:15px;font-size:12px;background:#318ff4;border-radius:50%;color:#fff;text-align:center;line-height:15px}.hotelBox[data-v-68aa3b3e]{text-align:center;height:200px}.el-pagination[data-v-68aa3b3e]{margin:20px 0;text-align:center}.el-tag--plain.is-hit[data-v-68aa3b3e]{border-color:#f8efd4}.el-tag--plain[data-v-68aa3b3e]{color:#f5a25d}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelQuery.vue?vue&type=style&index=0&id=ccbf9382&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelQuery.vue?vue&type=style&index=0&id=ccbf9382&lang=less&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".adult[data-v-ccbf9382]{position:relative}.adult[data-v-ccbf9382]:after{content:\\\"成人\\\";position:absolute;top:5px;font-size:12px;color:#666;right:35px}.kid[data-v-ccbf9382]{position:relative}.kid[data-v-ccbf9382]:after{content:\\\"儿童\\\";position:absolute;top:5px;font-size:12px;color:#666;right:35px}.hotel-filter[data-v-ccbf9382]{margin-bottom:20px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelFilter.vue?vue&type=style&index=0&id=1b4322f9&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelFilter.vue?vue&type=style&index=0&id=1b4322f9&lang=less&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".filter-list[data-v-1b4322f9]{font-size:14px;color:#666;padding:5px 0;height:80px;border:1px solid #ccc;margin-bottom:200px}.filter-list .box[data-v-1b4322f9]{height:100%;padding:10px 12px;border-right:1px solid #ddd}.filter-list .box[data-v-1b4322f9]:last-child{border-right:none}.filter-list .box .select[data-v-1b4322f9]{margin-top:10px;font-size:12px;display:flex;justify-content:space-between;cursor:pointer}.el-button--text[data-v-1b4322f9]{position:relative;display:block;width:100%;font-size:13px;color:#606266;display:flex}.el-button--text i[data-v-1b4322f9]{position:absolute;right:0}.el-checkbox-group .el-checkbox[data-v-1b4322f9]{display:flex;padding:10px 0}.el-checkbox-group .el-checkbox[data-v-1b4322f9] .el-checkbox__input{padding-left:12px}.el-checkbox-group .el-checkbox[data-v-1b4322f9] .el-checkbox__label{padding-left:16px}.popover[data-v-1b4322f9]{max-height:294px!important;overflow-y:auto;position:relative}.popover[data-v-1b4322f9]::-webkit-scrollbar{position:absolute;width:10px;padding-right:-20px;right:-20px}.popover[data-v-1b4322f9]::-webkit-scrollbar-thumb{border-radius:10px;background:rgba(0,0,0,.2)}.popover[data-v-1b4322f9]::-webkit-scrollbar-track{border-radius:0;background:rgba(0,0,0,.1)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelList.vue?vue&type=style&index=0&id=ec10d0f0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelList.vue?vue&type=style&index=0&id=ec10d0f0&lang=less&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".container[data-v-ec10d0f0]{display:flex;justify-content:space-between;padding:25px 0;border-bottom:1px solid #eee;cursor:pointer}.container img[data-v-ec10d0f0]{width:320px;height:210px;-o-object-fit:cover;object-fit:cover}.container .introduce[data-v-ec10d0f0]{flex:1;padding:0 20px}.container .introduce h4[data-v-ec10d0f0]{font-weight:400;font-size:x-large}.container .introduce .alias[data-v-ec10d0f0]{color:#999;padding-top:4px}.container .introduce .data[data-v-ec10d0f0]{padding:8px 0;display:flex;align-items:center}.container .introduce .data div.flex1[data-v-ec10d0f0]{flex:1}.container .introduce .data div.stars[data-v-ec10d0f0]{width:41%}.container .introduce .data div span[data-v-ec10d0f0]{color:#f90}.container .introduce .place[data-v-ec10d0f0]{font-size:14px;color:#666}.container .roomList[data-v-ec10d0f0]{padding-top:30px;width:234px}.container .roomList .price[data-v-ec10d0f0]{color:#f90;font-size:larger}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hotel-filter\"},[_c('el-row',{staticClass:\"filters-top\",attrs:{\"type\":\"flex\",\"justify\":\"space-between\",\"align\":\"middle\",\"gutter\":10}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-autocomplete',{attrs:{\"Lhighlight-first-item\":true,\"fetch-suggestions\":_vm.querySearchAsync,\"placeholder\":\"切换城市\",\"trigger-on-focus\":false,\"select-when-unmatched\":true},on:{\"select\":_vm.SelectCity},model:{value:(_vm.formCityName),callback:function ($$v) {_vm.formCityName=$$v},expression:\"formCityName\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_c('div',{staticClass:\"block\"},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"value-format\":\"yyyy-MM-dd\",\"picker-options\":_vm.pickerOptions},model:{value:(_vm.arrDate),callback:function ($$v) {_vm.arrDate=$$v},expression:\"arrDate\"}})],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('el-popover',{attrs:{\"width\":310,\"placement\":\"bottom\",\"offset\":35},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('el-row',{staticClass:\"tool\",attrs:{\"type\":\"flex\",\"align\":\"middle\",\"gutter\":10}},[_c('el-col',{attrs:{\"span\":10}},[_c('span',[_vm._v(\"每间\")])]),_vm._v(\" \"),_c('el-col',{staticClass:\"adult\",attrs:{\"span\":7}},[_c('el-select',{attrs:{\"size\":\"mini\",\"placeholder\":\"\"},model:{value:(_vm.adultValue),callback:function ($$v) {_vm.adultValue=$$v},expression:\"adultValue\"}},_vm._l((7),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":7}},[_c('el-select',{staticClass:\"kid\",attrs:{\"size\":\"mini\",\"placeholder\":\"\"},model:{value:(_vm.kidValue),callback:function ($$v) {_vm.kidValue=$$v},expression:\"kidValue\"}},_vm._l((4),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"right\",\"padding-top\":\"10px\",\"border-top\":\"1px solid #eee\",\"margin-top\":\"10px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.headleClick}},[_vm._v(\"确定\")])],1),_vm._v(\" \"),_c('el-input',{attrs:{\"slot\":\"reference\",\"placeholder\":\"人数未定\",\"suffix-icon\":\"el-icon-user\"},slot:\"reference\",model:{value:(_vm.peopleNumber),callback:function ($$v) {_vm.peopleNumber=$$v},expression:\"peopleNumber\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"}},[_vm._v(\"查看价格\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            visible: false,\r\n            // 出发地\r\n            formCityName:'',\r\n            // 出发时间\r\n            arrDate:[],\r\n            // 人数\r\n            peopleNumber:'',\r\n            // 成人数\r\n            adultValue: '',\r\n            // 儿童数\r\n            kidValue: '',\r\n            pickerOptions:{\r\n                // 禁用日期\r\n                disabledDate(disDate){\r\n                    return disDate.getTime() <= (Date.now()-86400000)\r\n                },\r\n            }\r\n\r\n        }\r\n    },\r\n    methods:{\r\n        // 选中搜索建议回调函数\r\n        SelectCity(item){\r\n            // 选中时可以拿到选中的那个数据对象\r\n            if(!item){\r\n                let item = new Object()\r\n                item.name = this.formCityName\r\n                // const item = {'name': this.formCityName}\r\n            }\r\n            this.$axios({\r\n                url:'/cities?name=' + this.formCityName\r\n            }).then(res => {\r\n                if(!res.data.data.length){\r\n                    this.$message({\r\n                        showClose: true,\r\n                        message: `搜索不到当前城市`,\r\n                        type: 'error'\r\n                    });\r\n                    return\r\n                }\r\n                const city = res.data.data[0].id\r\n                let item = {}\r\n                item.name = this.formCityName\r\n                this.$emit('getHotelList',{city,'cityName': item.name})\r\n            }).catch(err => {\r\n                console.log(err);\r\n            })\r\n            \r\n            \r\n        },\r\n\r\n        // 显示建议列表函数，在输入框中输入时触发 \r\n        querySearchAsync(queryString , showList){\r\n            // 判断是否存在数据\r\n            if (!queryString) {\r\n                showList([\r\n                    {\r\n                        value: \"请输入关键字\",\r\n                    },\r\n                ]);\r\n                return;\r\n            }\r\n            // 远程服务器获取城市列表\r\n            this.$axios({\r\n                url: \"/airs/city\",\r\n                params: {\r\n                    name: queryString,\r\n                },\r\n            }).then((res) => {\r\n                // console.log(res.data);\r\n                const data = res.data.data.map((city) => {\r\n                    // 之前这里是直接获取数据, value 是以 name 作为基础\r\n                    // 用来显示建议列表, 只需要在赋值 value 的时候,将 市字去掉即可\r\n                    return {\r\n                        ...city,\r\n                        value: city.name,\r\n                    };\r\n                });\r\n                showList(data);\r\n            });\r\n        },\r\n        // 确认按钮点击事件\r\n        headleClick(){\r\n            this.peopleNumber = `${this.adultValue}成人 ${this.kidValue}儿童`\r\n            this.visible = false\r\n        }\r\n    },\r\n    watch:{\r\n        arrDate(){\r\n            // 将入住和离店时间的数组进行解构赋值\r\n            const [enterTime,leftTime] = this.arrDate\r\n            this.$emit('getHotelList',{enterTime,leftTime})\r\n        }\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelQuery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelQuery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HotelQuery.vue?vue&type=template&id=ccbf9382&scoped=true&\"\nimport script from \"./HotelQuery.vue?vue&type=script&lang=js&\"\nexport * from \"./HotelQuery.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./HotelQuery.vue?vue&type=style&index=0&id=ccbf9382&lang=less&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"ccbf9382\",\n  \"e09d6b20\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{staticClass:\"filter-list\",attrs:{\"align\":\"middle\"}},[_c('el-col',{staticClass:\"box\",attrs:{\"span\":5}},[_c('span',[_vm._v(\"价格\")]),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\"}},[_vm._v(\"￥0-\"+_vm._s(_vm.priceScope))]),_vm._v(\" \"),_c('div',{staticClass:\"block\"},[_c('el-slider',{attrs:{\"show-tooltip\":false,\"max\":4000},on:{\"change\":_vm.priceChange},model:{value:(_vm.priceScope),callback:function ($$v) {_vm.priceScope=$$v},expression:\"priceScope\"}})],1)]),_vm._v(\" \"),_c('el-col',{staticClass:\"box\",attrs:{\"span\":4}},[_c('span',[_vm._v(\"住宿等级\")]),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"bottom-start\",\"trigger\":\"hover\",\"transition\":\"el-zoom-in-top\",\"offset\":-20}},[_c('el-checkbox-group',{on:{\"change\":_vm.levelsChange},model:{value:(_vm.levelsIndex),callback:function ($$v) {_vm.levelsIndex=$$v},expression:\"levelsIndex\"}},_vm._l((_vm.hotelOption.levels),function(item){return _c('div',{key:item.id},[_c('el-checkbox',{attrs:{\"label\":item.id,\"checked\":_vm.isChecked},model:{value:(item.id),callback:function ($$v) {_vm.$set(item, \"id\", $$v)},expression:\"item.id\"}},[_vm._v(_vm._s(item.name))])],1)}),0),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"text\"},slot:\"reference\"},[_vm._v(_vm._s(_vm.isLevels)),_c('i',{staticClass:\"el-icon-arrow-down down\"})])],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"box\",attrs:{\"span\":4}},[_c('span',[_vm._v(\"住宿类型\")]),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"bottom-start\",\"trigger\":\"hover\",\"transition\":\"el-zoom-in-top\",\"offset\":-20}},[_c('el-checkbox-group',{on:{\"change\":_vm.typesChange},model:{value:(_vm.typesIndex),callback:function ($$v) {_vm.typesIndex=$$v},expression:\"typesIndex\"}},_vm._l((_vm.hotelOption.types),function(item){return _c('div',{key:item.id},[_c('el-checkbox',{attrs:{\"label\":item.id,\"checked\":_vm.isChecked},model:{value:(item.id),callback:function ($$v) {_vm.$set(item, \"id\", $$v)},expression:\"item.id\"}},[_vm._v(_vm._s(item.name))])],1)}),0),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"text\"},slot:\"reference\"},[_vm._v(_vm._s(_vm.isTypes)),_c('i',{staticClass:\"el-icon-arrow-down down\"})])],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"box\",attrs:{\"span\":4}},[_c('span',[_vm._v(\"酒店设施\")]),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"bottom-start\",\"trigger\":\"hover\",\"transition\":\"el-zoom-in-top\",\"offset\":-20}},[_c('el-checkbox-group',{on:{\"change\":_vm.assetsChange},model:{value:(_vm.assetsIndex),callback:function ($$v) {_vm.assetsIndex=$$v},expression:\"assetsIndex\"}},_vm._l((_vm.hotelOption.assets),function(item){return _c('div',{key:item.id},[_c('el-checkbox',{attrs:{\"label\":item.id,\"checked\":_vm.isChecked},model:{value:(item.id),callback:function ($$v) {_vm.$set(item, \"id\", $$v)},expression:\"item.id\"}},[_vm._v(_vm._s(item.name))])],1)}),0),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"text\"},slot:\"reference\"},[_vm._v(_vm._s(_vm.isAssets)),_c('i',{staticClass:\"el-icon-arrow-down down\"})])],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"box\",attrs:{\"span\":4}},[_c('span',[_vm._v(\"酒店品牌\")]),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"bottom-start\",\"trigger\":\"hover\",\"transition\":\"el-zoom-in-top\",\"offset\":-20}},[_c('div',{staticClass:\"popover\"},[_c('el-checkbox-group',{on:{\"change\":_vm.brandsChange},model:{value:(_vm.brandsIndex),callback:function ($$v) {_vm.brandsIndex=$$v},expression:\"brandsIndex\"}},_vm._l((_vm.hotelOption.brands),function(item){return _c('div',{key:item.id},[_c('el-checkbox',{attrs:{\"label\":item.id,\"checked\":_vm.isChecked},model:{value:(item.id),callback:function ($$v) {_vm.$set(item, \"id\", $$v)},expression:\"item.id\"}},[_vm._v(_vm._s(item.name))])],1)}),0)],1),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"text\"},slot:\"reference\"},[_vm._v(_vm._s(_vm.isBrands)),_c('i',{staticClass:\"el-icon-arrow-down down\"})])],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"box\",attrs:{\"span\":3}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.repeal}},[_vm._v(\"撤销条件\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            hotelOption: [],\r\n            priceScope: 4000,\r\n            // 酒店等级\r\n            levels:'',\r\n            // 酒店类型\r\n            types:'',\r\n            // 酒店设施\r\n            assets:'',\r\n            // 酒店品牌\r\n            brands:'',\r\n            isLevels:'不限',\r\n            isTypes:'不限',\r\n            isAssets:'不限',\r\n            isBrands:'不限',\r\n            levelsIndex:[],\r\n            typesIndex:[],\r\n            assetsIndex:[],\r\n            brandsIndex:[],\r\n            // 控制所有的多选框的选中状态\r\n            isChecked: false\r\n        }\r\n    },\r\n    created(){\r\n         // 获取酒店选项\r\n        this.$axios({\r\n            url:'/hotels/options'\r\n        }).then(res =>{\r\n            // console.log(res.data.data);\r\n            this.hotelOption = res.data.data\r\n        })\r\n    },\r\n    methods:{\r\n        // 这里统一处理筛选发生变化发送请求\r\n        getHotelList(){\r\n            const hotelOption = {\r\n                'price_lt': this.priceScope,\r\n                'hotellevel_in': this.levelsIndex,\r\n                'hoteltype_in': this.typesIndex,\r\n                'hotelasset_in': this.assetsIndex,\r\n                'hotelbrand_in': this.brandsIndex\r\n            }\r\n            this.$emit('getHotelList',hotelOption)\r\n        },\r\n        // 价格区间发生变化\r\n        priceChange(newPrice,isGet){\r\n            // console.log(priceScope);\r\n            if(!isGet){\r\n                this.getHotelList()\r\n            }\r\n        },\r\n        // 住宿等级数组发生变化\r\n        levelsChange(newLevels,isGet){\r\n            if(!newLevels.length){\r\n                this.isLevels = '不限'\r\n            }else if(newLevels.length == 1){\r\n                this.hotelOption.levels.forEach(item =>{\r\n                    if(item.id == newLevels[0]){\r\n                        this.isLevels = item.name\r\n                        return\r\n                    }\r\n                })\r\n            }else{\r\n                this.isLevels = `已选${newLevels.length}项`\r\n            }\r\n            // console.log(newLevels);\r\n            if(!isGet){\r\n                this.getHotelList()\r\n            }\r\n        },\r\n        // 住宿类型数组发生变化\r\n        typesChange(newTypes,isGet){\r\n            if(!newTypes.length){\r\n                this.isTypes = '不限'\r\n            }else if(newTypes.length == 1){\r\n                this.hotelOption.types.forEach(item =>{\r\n                    if(item.id == newTypes[0]){\r\n                        this.isTypes = item.name\r\n                        return\r\n                    }\r\n                })\r\n            }else{\r\n                this.isTypes = `已选${newTypes.length}项`\r\n            }\r\n            // console.log(newTypes);\r\n            if(!isGet){\r\n                this.getHotelList()\r\n            }\r\n        },\r\n        // 酒店设施数组发生变化\r\n        assetsChange(newAssets,isGet){\r\n            if(!newAssets.length){\r\n                this.isAssets = '不限'\r\n            }else if(newAssets.length == 1){\r\n                this.hotelOption.assets.forEach(item =>{\r\n                    if(item.id == newAssets[0]){\r\n                        this.isAssets = item.name\r\n                        return\r\n                    }\r\n                })\r\n            }else{\r\n                this.isAssets = `已选${newAssets.length}项`\r\n            }\r\n            // console.log(newAssets);\r\n            if(!isGet){\r\n                this.getHotelList()\r\n            }\r\n        },\r\n        // 酒店品牌数组发生变化\r\n        brandsChange(newBrands,isGet){\r\n            if(!newBrands.length){\r\n                this.isBrands = '不限'\r\n            }else if(newBrands.length == 1){\r\n                this.hotelOption.brands.forEach(item =>{\r\n                    if(item.id == newBrands[0]){\r\n                        this.isBrands = item.name\r\n                        return\r\n                    }\r\n                })\r\n            }else{\r\n                this.isBrands = `已选${newBrands.length}项`\r\n            }\r\n            // console.log(newBrands);\r\n            if(!isGet){\r\n                this.getHotelList()\r\n            }\r\n        },\r\n        // 撤销按钮点击事件\r\n        repeal(){\r\n            // 将价格区间变回最开始的4000\r\n            this.priceScope = 4000\r\n            // 取消选中的数据，并手动触发一次数据变化事件\r\n            this.levelsChange(this.levelsIndex = [],true)\r\n            this.typesChange(this.typesIndex = [],true)\r\n            this.assetsChange(this.assetsIndex = [],true)\r\n            this.brandsChange(this.brandsIndex = [],true)\r\n            this.getHotelList()\r\n        }\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelFilter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelFilter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HotelFilter.vue?vue&type=template&id=1b4322f9&scoped=true&\"\nimport script from \"./HotelFilter.vue?vue&type=script&lang=js&\"\nexport * from \"./HotelFilter.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./HotelFilter.vue?vue&type=style&index=0&id=1b4322f9&lang=less&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"1b4322f9\",\n  \"168c4100\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",on:{\"click\":_vm.handleClick}},[_vm._ssrNode(\"<img\"+(_vm._ssrAttr(\"src\",_vm.hotel.photos))+\" data-v-ec10d0f0> \"),_vm._ssrNode(\"<div class=\\\"introduce\\\" data-v-ec10d0f0>\",\"</div>\",[_vm._ssrNode(\"<h4 data-v-ec10d0f0>\"+_vm._ssrEscape(_vm._s(_vm.hotel.name))+\"</h4> <div class=\\\"alias\\\" data-v-ec10d0f0>\"+_vm._ssrEscape(_vm._s(_vm.hotel.alias))+\"</div> \"),_vm._ssrNode(\"<div class=\\\"data\\\" data-v-ec10d0f0>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"stars\\\" data-v-ec10d0f0>\",\"</div>\",[_c('el-rate',{attrs:{\"disabled\":\"\",\"show-score\":\"\",\"text-color\":\"#ff9900\",\"score-template\":((_vm.hotel.stars) + \"分\")},model:{value:(_vm.hotel.stars),callback:function ($$v) {_vm.$set(_vm.hotel, \"stars\", $$v)},expression:\"hotel.stars\"}})],1),_vm._ssrNode(\" <div class=\\\"flex1\\\" data-v-ec10d0f0><span data-v-ec10d0f0>\"+_vm._ssrEscape(_vm._s(_vm.hotel.all_remarks))+\"</span>条评价\\n      </div> <div class=\\\"flex1\\\" data-v-ec10d0f0><span data-v-ec10d0f0>\"+_vm._ssrEscape(_vm._s(_vm.hotel.very_good_remarks))+\"</span>篇游记\\n      </div>\")],2),_vm._ssrNode(\" <div class=\\\"place\\\" data-v-ec10d0f0><i class=\\\"el-icon-location-information\\\" data-v-ec10d0f0></i>\"+_vm._ssrEscape(\"位于：\"+_vm._s(_vm.hotel.address)+\"\\n    \")+\"</div>\")],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"roomList\\\" data-v-ec10d0f0>\",\"</div>\",[_c('el-table',{attrs:{\"data\":_vm.hotel.products,\"show-header\":false}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\"}}),_vm._v(\" \"),_c('el-table-column',{scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(scope.row.price))]),_vm._v(\"起\\n          \"),_c('i',{staticClass:\"el-icon-arrow-right\"})]}}])})],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  props: {\r\n    hotel: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    handleClick() {\r\n      this.$router.push(\"/hotel/detail?id=\" + this.hotel.id);\r\n    },\r\n  },\r\n};\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HotelList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HotelList.vue?vue&type=template&id=ec10d0f0&scoped=true&\"\nimport script from \"./HotelList.vue?vue&type=script&lang=js&\"\nexport * from \"./HotelList.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./HotelList.vue?vue&type=style&index=0&id=ec10d0f0&lang=less&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"ec10d0f0\",\n  \"2ef61f26\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<section class=\\\"container\\\" data-v-68aa3b3e>\",\"</section>\",[_c('el-breadcrumb',{staticClass:\"breadcrumb\",attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"酒店\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.urlCityName)+\"酒店预订\")])],1),_vm._ssrNode(\" \"),_c('HotelQuery',{on:{\"getHotelList\":_vm.getHotelList}}),_vm._ssrNode(\" \"),_c('el-row',{staticClass:\"sights\",staticStyle:{\"height\":\"260px\"},attrs:{\"type\":\"flex\"}},[_c('el-col',{staticStyle:{\"background\":\"#fff\"},attrs:{\"span\":14}},[_c('el-row',{staticClass:\"regional\",attrs:{\"type\":\"flex\"}},[_c('el-col',{attrs:{\"span\":3}},[_vm._v(\"区域:\")]),_vm._v(\" \"),_c('el-col',{staticClass:\"cities\",attrs:{\"span\":19}},_vm._l((_vm.cities),function(citie){return _c('el-tag',{key:citie.id,staticClass:\"citie\",attrs:{\"hit\":true,\"effect\":\"plain\"}},[_vm._v(_vm._s(citie.name))])}),1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"price\"},[_c('el-col',{attrs:{\"span\":3}},[_vm._v(\"均价:\")]),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"top\",\"width\":\"200\",\"trigger\":\"click\"}},[_c('div',{staticClass:\"popbox\"},[_vm._v(\"等级评定是针对房价，设施和服务等各方面水平的综合评估\")]),_vm._v(\" \"),_c('el-col',{staticClass:\"dishini\",attrs:{\"slot\":\"reference\",\"span\":30},slot:\"reference\"},[_vm._l((3),function(item,index){return _c('i',{key:index,staticClass:\"iconfont icon-dishini-\"})}),_vm._v(\"¥332 \")],2)],1),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"top\",\"width\":\"200\",\"trigger\":\"click\"}},[_c('div',{staticClass:\"popbox\"},[_vm._v(\"等级评定是针对房价，设施和服务等各方面水平的综合评估\")]),_vm._v(\" \"),_c('el-col',{staticClass:\"dishini\",attrs:{\"slot\":\"reference\",\"span\":30},slot:\"reference\"},[_vm._l((4),function(item,index){return _c('i',{key:index,staticClass:\"iconfont icon-dishini-\"})}),_vm._v(\"¥521 \")],2)],1),_vm._v(\" \"),_c('el-popover',{attrs:{\"placement\":\"top\",\"width\":\"200\",\"trigger\":\"click\"}},[_c('div',{staticClass:\"popbox\"},[_vm._v(\"等级评定是针对房价，设施和服务等各方面水平的综合评估\")]),_vm._v(\" \"),_c('el-col',{staticClass:\"dishini\",attrs:{\"slot\":\"reference\",\"span\":30},slot:\"reference\"},[_vm._l((5),function(item,index){return _c('i',{key:index,staticClass:\"iconfont icon-dishini-\"})}),_vm._v(\"¥768 \")],2)],1)],1)],1),_vm._v(\" \"),_c('el-col',{staticStyle:{\"background\":\"#eee\"},attrs:{\"span\":10}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isMap),expression:\"isMap\"}],staticStyle:{\"height\":\"260px\",\"width\":\"420px\"},attrs:{\"id\":\"container\"}})])],1),_vm._ssrNode(\" \"),_c('HotelFilter',{on:{\"getHotelList\":_vm.getHotelList}}),_vm._ssrNode(\" \"),(_vm.hotelList.data.length)?_vm._ssrNode(\"<div class=\\\"HotelList\\\" data-v-68aa3b3e>\",\"</div>\",_vm._l((_vm.hotelList.data),function(hotel){return _c('HotelList',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],key:hotel.id,attrs:{\"hotel\":hotel}})}),1):_vm._e(),_vm._ssrNode(\" \"),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.hotelList.total,\"current-page\":_vm.currentPage},on:{\"current-change\":_vm.currentChange}}),_vm._ssrNode(\" \"),(_vm.isBox)?_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"hotelBox\"},[_vm._ssrNode(((!_vm.hotelList.data.length && _vm.isGo)?(\"<p data-v-68aa3b3e>找不到符合要求的酒店了😥</p>\"):\"<!---->\"))]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            isBox: true,\r\n            isGo: false,\r\n            isMap: true,\r\n            cityId: '',\r\n            loading: false,\r\n            hotelList: {\r\n                data: []\r\n            },\r\n            currentPage: 1,\r\n            // 获取的条数\r\n            limit: 10,\r\n            hotelOption: {},\r\n            urlCityName: '',\r\n            cities: [],\r\n            // 当前搜索页城市经纬度\r\n            location: [],\r\n            map: {},\r\n            markers: []\r\n        }\r\n    },\r\n    created() {\r\n        \r\n        this.loading = true\r\n        this.isMap = true\r\n    },\r\n\r\n    async mounted() {\r\n        window.onLoad = async () => {\r\n            var map = new AMap.Map(\"container\", {\r\n                zoom: 7, // 级别\r\n                center: [113.428072, 23.129259], // 中心点坐标\r\n                viewMode: \"3D\", // 使用3D视图\r\n                autoFitView: true, // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围\r\n            });\r\n            this.map = map;\r\n            if (!this.$route.query.cityName) {\r\n                await this.getInfoCity()\r\n            } else {\r\n                // 获取城市名\r\n                this.urlCityName = this.$route.query.cityName\r\n\r\n                // 获取城市id\r\n                await this.$axios({\r\n                    url: '/cities?name=' + this.$route.query.cityName\r\n                }).then(res => {\r\n                    if (!res.data.data.length) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            message: `搜索不到当前城市`,\r\n                            type: 'error'\r\n                        });\r\n                        return\r\n                    }\r\n                    // console.log(res.data.data[0].id);\r\n                    this.cityId = res.data.data[0].id\r\n                })\r\n\r\n                this.getHotelList()\r\n                this.getScenice()\r\n            }\r\n\r\n        };\r\n\r\n        var key = \"d5192dea5a16faf3b3afdd0fb562d794\"; // 你的key\r\n        var url = `https://webapi.amap.com/maps?v=1.4.15&key=${key}&callback=onLoad`;\r\n        var jsapi = document.createElement('script');\r\n        jsapi.charset = 'utf-8';\r\n        jsapi.src = url;\r\n        document.head.appendChild(jsapi);\r\n    },\r\n    methods: {\r\n        // 获取景点\r\n        getScenice() {\r\n            // 获取城市区域景点\r\n            this.$axios({\r\n                url: `/cities?name=${this.urlCityName}`\r\n            }).then(res => {\r\n                // console.log(res.data.data[0].scenics);\r\n                this.cities = res.data.data[0].scenics\r\n            })\r\n        },\r\n\r\n        // 获取酒店列表\r\n        async getHotelList(hotelOption) {\r\n            if(this.HotelList){\r\n                this.isBox = false\r\n            }\r\n            this.loading = true\r\n            // 用于地址栏显示\r\n            let str = \"\";\r\n            if (hotelOption) {\r\n                console.log(hotelOption);\r\n                // 将获取过来的数据进行拼接\r\n                var keys = Object.keys(hotelOption); // [\"city\", \"price_lt\", \"hotellevel\", \"hoteltype\"]\r\n\r\n                keys.forEach(Option => {\r\n                    // 数据的格式是否为数组\r\n                    if (Array.isArray(hotelOption[Option])) {\r\n                        hotelOption[Option].forEach(item => {\r\n                            str += `${Option}=${item}&`\r\n                        })\r\n                    } else {\r\n                        // 判断传递过来的数值中有没有城市名字和城市id\r\n                        if (Option == 'cityName') {\r\n                            this.urlCityName = hotelOption[Option]\r\n\r\n                            // 修改原有参数,而不跳转页面\r\n                            this.$router.push({\r\n                                path: this.$route.path,\r\n                                query: Object.assign({}, this.$route.query, { cityName: this.urlCityName })\r\n                            })\r\n\r\n                            // 重新获取景点信息\r\n                            this.getScenice()\r\n                        } else if (Option == 'city') {\r\n                            this.cityId = hotelOption[Option]\r\n                        } else {\r\n                            str += `${Option}=${hotelOption[Option]}&`;\r\n                        }\r\n\r\n                    }\r\n                })\r\n                // 定位到第一页显示\r\n                this.currentPage = 1\r\n            }\r\n            // str += `_limit=${this.limit}`\r\n            str += `city=${this.cityId}&_limit=${this.limit}`\r\n\r\n            console.log(str);\r\n            // 发送请求获取数据\r\n            const HotelList = await this.$axios({\r\n                url: `/hotels?${str}`,\r\n            })\r\n\r\n            HotelList.data.data = HotelList.data.data.slice((this.currentPage - 1) * 10, (this.currentPage) * 10)\r\n            this.hotelList = HotelList.data\r\n            this.loading = false\r\n            if (!this.hotelList.data.length) {\r\n                this.isGo = true\r\n                this.isBox = true\r\n            } else {\r\n                this.isBox = false\r\n            }\r\n\r\n            // 获取地图经纬度\r\n            this.location = [];\r\n            HotelList.data.data.forEach(item => {\r\n                this.location.push({\r\n                    x: item.location.latitude,\r\n                    y: item.location.longitude,\r\n                })\r\n            })\r\n            console.log(this.location);\r\n            // 加载地图\r\n            if(this.location.length){\r\n                this.mapLoad()\r\n            }\r\n        },\r\n\r\n        // 当前页发生变化\r\n        currentChange(newCurrent) {\r\n            this.isBox = false\r\n            // 移动到酒店列表的上方\r\n            let HotelHeight = document.querySelector('.HotelList').offsetTop\r\n            window.scrollTo({ \r\n                top: HotelHeight, \r\n                behavior: \"smooth\" \r\n            });\r\n            // 先根据页数获取酒店的条数\r\n            this.currentPage = newCurrent\r\n            this.limit = newCurrent * 10\r\n            this.getHotelList()\r\n        },\r\n\r\n        // 高德地图\r\n        mapLoad() {\r\n            this.map.remove(this.markers);\r\n            this.markers = [];\r\n\r\n            // 遍历-创建点实例\r\n            this.location.forEach((item, index) => {\r\n                var markerContent =\r\n                    \"\"\r\n                    +\r\n                    '<div class=\"custom-content-marker\">'\r\n                    +\r\n                    '<img src=\"https://webapi.amap.com/theme/v1.3/markers/b/mark_bs.png\">'\r\n                    +\r\n                    `<div class=\"close-btn\" onclick=\"clearMarker()\">${index + 1}</div>`\r\n                    +\r\n                    '</div>';\r\n                // console.log('markerContent', markerContent);\r\n                var maker = new AMap.Marker({\r\n                    content: markerContent,\r\n                    position: [item.y, item.x],\r\n                })\r\n                this.markers.push(maker)\r\n            })\r\n            this.map.panTo([this.location[0].y, this.location[0].x])\r\n            // 添加点\r\n            this.map.add(this.markers)\r\n            this.isMap = false\r\n        },\r\n\r\n        // 获取地图当前行政区\r\n        async getInfoCity() {\r\n            // 获取用户当前定位城市\r\n            await this.map.getCity(async (info) => {\r\n                // console.log(info);\r\n                // 修改原有参数,而不跳转页面\r\n                this.urlCityName = info.city\r\n\r\n                // 获取城市id\r\n                await this.$axios({\r\n                    url: '/cities?name=' + this.urlCityName\r\n                }).then(res => {\r\n                    console.log(res);\r\n                    if (!res.data.data.length) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            message: `搜索不到当前城市`,\r\n                            type: 'error'\r\n                        });\r\n                        return\r\n                    }\r\n                    // console.log(res.data.data[0].id);\r\n                    this.cityId = res.data.data[0].id\r\n                })\r\n\r\n                this.$router.push({\r\n                    path: this.$route.path,\r\n                    query: Object.assign({}, this.$route.query, { cityName: this.urlCityName })\r\n                })\r\n                this.getHotelList()\r\n                this.getScenice()\r\n                this.$message({\r\n                    showClose: true,\r\n                    message: `当前定位城市 ${info.city}`,\r\n                    type: 'success'\r\n                });\r\n            });\r\n        }\r\n    }\r\n};\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=68aa3b3e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&id=68aa3b3e&lang=less&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"68aa3b3e\",\n  \"42fd0080\"\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {HotelQuery: require('D:\\\\前端开发\\\\线下黑马学习\\\\07-Vue\\\\day21\\\\xingyue\\\\components\\\\hotel\\\\HotelQuery.vue').default,HotelFilter: require('D:\\\\前端开发\\\\线下黑马学习\\\\07-Vue\\\\day21\\\\xingyue\\\\components\\\\hotel\\\\HotelFilter.vue').default,HotelList: require('D:\\\\前端开发\\\\线下黑马学习\\\\07-Vue\\\\day21\\\\xingyue\\\\components\\\\hotel\\\\HotelList.vue').default})\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAZA;AAoBA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AADA;AAIA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AACA;AACA;AACA;AAEA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAlEA;AAmEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AANA;AA1FA;;ACvEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAsBA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1GA;AAlCA;;ACjGA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AALA;AADA;AASA;AACA;AACA;AACA;AACA;AAJA;AAVA;;AClDA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;AAoBA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AALA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAUA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AA5KA;AAzEA;;ACpEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}