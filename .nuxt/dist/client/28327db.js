(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{370:function(t,e,o){var content=o(374);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(35).default)("0a2549cb",content,!0,{sourceMap:!1})},371:function(t,e,o){var content=o(376);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(35).default)("0273269d",content,!0,{sourceMap:!1})},373:function(t,e,o){"use strict";var r=o(370);o.n(r).a},374:function(t,e,o){(e=o(34)(!1)).push([t.i,".form[data-v-494839ac]{padding:25px}.form-item[data-v-494839ac]{margin-bottom:20px}.form-text[data-v-494839ac]{font-size:12px;color:#409eff;text-align:right;line-height:1}.submit[data-v-494839ac]{width:100%;margin-top:10px}",""]),t.exports=e},375:function(t,e,o){"use strict";var r=o(371);o.n(r).a},376:function(t,e,o){(e=o(34)(!1)).push([t.i,".form[data-v-435c5fab]{padding:25px}.form-item[data-v-435c5fab]{margin-bottom:20px}.form-text[data-v-435c5fab]{font-size:12px;color:#409eff;text-align:right;line-height:1}.submit[data-v-435c5fab]{width:100%;margin-top:10px}",""]),t.exports=e},377:function(t,e,o){"use strict";o.r(e);function r(source,t){if(null==source)return{};var e,i,o=function(source,t){if(null==source)return{};var e,i,o={},r=Object.keys(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||(o[e]=source[e]);return o}(source,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(source,e)&&(o[e]=source[e])}return o}var n={data:function(){var t=this;return{form:{username:"",nickname:"",captcha:"",password:"",checkPassword:""},rules:{username:[{required:!0,message:"该项不能为空",trigger:"blur"},{min:5,max:11,message:"请输入合法手机号",trigger:"blur"}],nickname:[{required:!0,message:"该项不能为空",trigger:"blur"}],captcha:[{required:!0,message:"该项不能为空",trigger:"blur"}],password:[{required:!0,message:"该项不能为空",trigger:"blur"}],checkPassword:[{validator:function(e,o,r){""==o?r(new Error("请再次输入密码")):o!=t.form.password?r(new Error("两次密码必须一致")):r()},trigger:"blur"}]}}},methods:{handleRegSubmit:function(){var t=this;console.log(this.form),this.$refs.form.validate().then((function(e){console.log("校验成功");var o=t.form,data=(o.checkPassword,r(o,["checkPassword"]));t.$axios({method:"post",url:"/accounts/register",data:data}).then((function(e){console.log(e.data),t.$message.success("注册成功"),t.$store.commit("user/setUserInfo",e.data)})).catch((function(t){console.dir(t)}))})).catch((function(t){console.log("校验失败")}))},handleSendCaptcha:function(){var t=this;this.$axios({method:"post",url:"/captchas",data:{tel:this.form.username}}).then((function(e){console.log(e.data),e.data.code&&t.$message.success("验证码发送成功: "+e.data.code)}))}}},c=(o(375),o(19)),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules}},[o("el-form-item",{staticClass:"form-item",attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"用户名手机"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),o("el-form-item",{staticClass:"form-item",attrs:{prop:"captcha"}},[o("el-input",{attrs:{placeholder:"验证码"},model:{value:t.form.captcha,callback:function(e){t.$set(t.form,"captcha",e)},expression:"form.captcha"}},[o("template",{slot:"append"},[o("el-button",{on:{click:t.handleSendCaptcha}},[t._v("\n                    发送验证码\n                ")])],1)],2)],1),t._v(" "),o("el-form-item",{staticClass:"form-item",attrs:{prop:"nickname"}},[o("el-input",{attrs:{placeholder:"你的名字"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),o("el-form-item",{staticClass:"form-item",attrs:{prop:"password"}},[o("el-input",{attrs:{placeholder:"密码",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),o("el-form-item",{staticClass:"form-item",attrs:{prop:"checkPassword"}},[o("el-input",{attrs:{placeholder:"确认密码",type:"password"},model:{value:t.form.checkPassword,callback:function(e){t.$set(t.form,"checkPassword",e)},expression:"form.checkPassword"}})],1),t._v(" "),o("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.handleRegSubmit}},[t._v("\n        注册\n    ")])],1)}),[],!1,null,"435c5fab",null);e.default=component.exports},378:function(t,e,o){"use strict";o.r(e);var r={data:function(){return{form:{username:"13800138000",password:"123456"},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入11位合法手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码必须6位以上",trigger:"blur"}]}}},methods:{handleLoginSubmit:function(){var t=this;this.$refs.form.validate().then((function(e){console.log(e),console.log("校验成功"),e&&t.$store.dispatch("user/login",t.form).then((function(e){t.$message.success("登录成功"),t.$router.back(),t.$emit("logins"),console.log(e)}))})).catch((function(t){console.log(t),console.log("校验失败")})),console.log(this.form)},hideErrMsg:function(t){this.$refs.form.clearValidate(t)}}},n=(o(373),o(19)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules}},[o("el-form-item",{staticClass:"form-item",attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"用户名/手机"},on:{focus:function(e){return t.hideErrMsg("username")}},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),o("el-form-item",{staticClass:"form-item",attrs:{prop:"password"}},[o("el-input",{attrs:{placeholder:"密码",type:"password"},on:{focus:function(e){return t.hideErrMsg("password")}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),o("p",{staticClass:"form-text"},[o("nuxt-link",{attrs:{to:"#"}},[t._v("忘记密码")])],1),t._v(" "),o("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.handleLoginSubmit}},[t._v("\n    登录\n  ")])],1)}),[],!1,null,"494839ac",null);e.default=component.exports},520:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},533:function(t,e,o){var r=o(16),n="["+o(520)+"]",c=RegExp("^"+n+n+"*"),l=RegExp(n+n+"*$"),f=function(t){return function(e){var o=String(r(e));return 1&t&&(o=o.replace(c,"")),2&t&&(o=o.replace(l,"")),o}};t.exports={start:f(1),end:f(2),trim:f(3)}},551:function(t,e,o){var content=o(651);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(35).default)("620226dd",content,!0,{sourceMap:!1})},648:function(t,e,o){"use strict";var r=o(2),n=o(533).trim;r({target:"String",proto:!0,forced:o(649)("trim")},{trim:function(){return n(this)}})},649:function(t,e,o){var r=o(5),n=o(520);t.exports=function(t){return r((function(){return!!n[t]()||"​᠎"!="​᠎"[t]()||n[t].name!==t}))}},650:function(t,e,o){"use strict";var r=o(551);o.n(r).a},651:function(t,e,o){(e=o(34)(!1)).push([t.i,".content[data-v-3b06a5b7]{display:flex;justify-content:center}.content .right[data-v-3b06a5b7]{width:750px;height:790px;margin-top:20px}.content .right h2[data-v-3b06a5b7]{font-weight:400;padding:10px 0}.content .right p[data-v-3b06a5b7]{font-size:12px;color:#999;margin-bottom:10px}.content .right .wenbenkuang[data-v-3b06a5b7]{height:500px;margin:20px 0}.content .right .wenbenkuang .quillWrapper[data-v-3b06a5b7]{height:400px}.content .right .issued[data-v-3b06a5b7]{font-size:14px}.content .right a[data-v-3b06a5b7]{color:orange}.content .right a[data-v-3b06a5b7] :hover{text-decoration:underline}.content .left[data-v-3b06a5b7]{width:225px;height:600px;border:1px solid #ddd;margin-top:20px;margin-left:25px;padding:10px}.content .left .photo_kong[data-v-3b06a5b7]{width:100%;height:250px;line-height:250px;text-align:center;font-size:40px;font-weight:700}.content .left .photo_kong span[data-v-3b06a5b7]{display:block;font-size:25px;font-weight:400;color:#ccc;margin-top:-60px}.content .left .photo_kong span[data-v-3b06a5b7]:first-child{font-size:40px;font-weight:400;color:#ccc}.content .left .photo_kong span[data-v-3b06a5b7]:nth-child(2){font-weight:400;color:#ccc;margin-top:-180px}.content .left .icon-kongzhuangtai1[data-v-3b06a5b7]:before{color:#ccc}.content .left li[data-v-3b06a5b7]{margin:10px 0;background-color:#faf7f7}.content .left .time[data-v-3b06a5b7]{display:flex;justify-content:space-between}.content .left h4[data-v-3b06a5b7]:hover,.content .left span[data-v-3b06a5b7]:hover{cursor:pointer}.content .container[data-v-3b06a5b7]{position:fixed;top:50%;margin-top:-100px;z-index:201}.content .container .main[data-v-3b06a5b7]{width:1000px;height:100%;margin:0 auto;position:relative}.content .container .main .form-wrapper[data-v-3b06a5b7]{width:400px;margin:0 auto;background:#fff;box-shadow:2px 2px 0 rgba(0,0,0,.1);overflow:hidden}.content .container .main .form-wrapper .tabs span[data-v-3b06a5b7]{display:block;width:50%;height:50px;box-sizing:border-box;border-top:2px solid #eee;background:#eee;line-height:48px;text-align:center;cursor:pointer;color:#666}.content .container .main .form-wrapper .tabs span.active[data-v-3b06a5b7]{color:orange;border-top-color:orange;background:#fff;font-weight:700}.content .isShow[data-v-3b06a5b7]{height:96%;width:225px;overflow:auto;background:#eee}.content .cover[data-v-3b06a5b7]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:200}",""]),t.exports=e},695:function(t,e,o){"use strict";o.r(e);o(37),o(63),o(28),o(61),o(36),o(110),o(111),o(79),o(648),o(29);var r=o(54);function n(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?n(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):n(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={data:function(){return{saveData:"",choiceCode:"",currentTab:0,login:!1,form:{title:"",content:"",choiceCity:""}}},created:function(){this.nowSaveDate()},methods:{nowSaveDate:function(){var t=new Date;console.log(t),this.saveData=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},save:function(){if(""==this.form.title.trim())return this.$message.closeAll(),this.$message.warning("标题不能为空");this.$store.commit("draft/addArticle",c({},this.form)),this.$message.success("保存草稿成功"),this.form.title="",this.form.content="",this.form.choiceCity=""},deletes:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"success",message:"删除成功!"}),e.$store.commit("draft/removeArticle",t)})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},compile:function(t){this.form=c({},t),this.$message.closeAll(),this.$message.success("编辑!")},handleChangeTab:function(t){this.currentTab=t},loadCityList:function(t,e){t?this.$axios({url:"/airs/city",params:{name:t}}).then((function(t){console.log(t);var data=t.data.data.map((function(t){return c(c({},t),{},{value:t.name})}));e(data)})):e([{value:"请输入关键字"}])},queryDepartSearch:function(t,e){this.loadCityList(t,e)},handleDepartSelect:function(t){this.choiceCode=t},imgUpload:function(t,e,o,r){var n=this,data=new FormData;data.append("files",t),this.$axios({url:"/upload",method:"post",data:data}).then((function(t){console.log(t.data);var c=n.$axios.defaults.baseURL+t.data[0].url;e.insertEmbed(o,"image",c),r()}))},Issued:function(){var t=this;return""==this.form.title.trim()?(this.$message.closeAll(),this.$message.warning("标题不能为空")):""==this.form.content.trim()?(this.$message.closeAll(),this.$message.warning("内容不能为空")):""==this.form.choiceCity.trim()?(this.$message.closeAll(),this.$message.warning("城市不能为空")):void(this.$store.state.user.userInfo.token?(this.login=!1,document.getElementById("cover1").classList.remove("cover"),this.$axios({method:"post",url:"/posts",headers:{Authorization:"Bearer "+this.$store.state.user.userInfo.token},data:{content:this.form.content,title:this.form.title,city:this.form.choiceCity}}).then((function(e){console.log(e),"新增成功"==e.data.message&&(t.$message.success(e.data.message),t.form.title="",t.form.content="",t.form.choiceCity="",t.$router.push("/post/"))}))):(this.$message.warning("未登录,请登录"),document.getElementById("cover1").classList.add("cover"),this.login=!0))}}},f=(o(650),o(19)),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[o("div",{attrs:{id:"cover1"}}),t._v(" "),o("div",{staticClass:"right"},[o("h2",[t._v("发表新攻略")]),t._v(" "),o("p",[t._v("分享你的个人游记，让更多人看到哦！")]),t._v(" "),o("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),o("div",{staticClass:"wenbenkuang"},[o("client-only",[o("VueEditor",{attrs:{useCustomImageHandler:!0},on:{"image-added":t.imgUpload},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),o("div",{staticClass:"city"},[o("el-form",{ref:"form",staticClass:"search-form-content",attrs:{"label-width":"80px"}},[o("el-form-item",{attrs:{label:"选择城市"}},[o("el-autocomplete",{staticClass:"el-autocomplete",attrs:{"trigger-on-focus":!1,"highlight-first-item":!0,"fetch-suggestions":t.queryDepartSearch,placeholder:"请搜索出发城市"},on:{select:t.handleDepartSelect},model:{value:t.form.choiceCity,callback:function(e){t.$set(t.form,"choiceCity",e)},expression:"form.choiceCity"}})],1)],1)],1),t._v(" "),o("div",{staticClass:"issued"},[o("el-button",{attrs:{type:"primary"},on:{click:t.Issued}},[t._v("发布")]),t._v("\n            或者\n            "),o("a",{attrs:{href:"javascript:;"},on:{click:t.save}},[t._v("保存到草稿")])],1)],1),t._v(" "),o("div",{staticClass:"left"},[o("h3",[t._v("草稿箱（"+t._s(t.$store.state.draft.draftArticle.length)+"）")]),t._v(" "),0==t.$store.state.draft.draftArticle.length?o("div",{staticClass:"photo_kong"},[o("span",{staticClass:"iconfont icon-kongzhuangtai1"}),t._v(" "),o("span",[t._v("空空如也!")])]):t._e(),t._v(" "),o("ul",{class:{isShow:t.$store.state.draft.draftArticle.length>9}},t._l(t.$store.state.draft.draftArticle,(function(e,r){return o("li",{key:r},[o("h4",[t._v(t._s(e.title))]),t._v(" "),o("div",{staticClass:"time"},[o("p",[t._v(t._s(t.saveData))]),t._v(" "),o("div",[o("span",{staticClass:"el-icon-edit",on:{click:function(o){return t.compile(e)}}}),t._v(" "),o("span",{staticClass:"el-icon-delete",on:{click:function(e){return t.deletes(r)}}})])])])})),0)]),t._v(" "),t.login?o("div",{staticClass:"container"},[o("el-row",{staticClass:"main",attrs:{type:"flex",justify:"center",align:"middle"}},[o("div",{staticClass:"form-wrapper"},[o("el-row",{staticClass:"tabs",attrs:{type:"flex",justify:"center"}},t._l(["登录","注册"],(function(e,r){return o("span",{key:r,class:{active:t.currentTab===r},on:{click:function(e){return t.handleChangeTab(r)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0),t._v(" "),0==t.currentTab?o("LoginForm",{on:{logins:t.Issued}}):t._e(),t._v(" "),1==t.currentTab?o("RegisterForm"):t._e()],1)])],1):t._e()])}),[],!1,null,"3b06a5b7",null);e.default=component.exports;installComponents(component,{LoginForm:o(378).default,RegisterForm:o(377).default})}}]);